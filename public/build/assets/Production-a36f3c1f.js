import{o as n,f as c,b as e,H as Z,A as y,L as ie,h as V,k as W,I as ce,G as _e,M as de,K as ue,T as fe,q as he,a as f,w as $,u as a,j as E,t as r,c as X,d as C,g as ee,i as M,p as T,n as j,D as xe,F as B,r as L,C as ge,l as ve,E as be,Z as we}from"./app-05106c13.js";import{r as ye,M as ke,R as $e,h as Ce,y as De}from"./menu-0fd29ff7.js";import{t as te,u as se,o as K,e as Se,l as q,H as J,p as Me,a as le,b as R}from"./use-outside-click-40f4ba09.js";import{b as Te}from"./use-text-value-1750268b.js";import{r as ae}from"./XMarkIcon-c17086d0.js";import{r as je}from"./ChevronDownIcon-f3fa4a18.js";import{_ as Oe}from"./Notification-615cdcb8.js";import"./_commonjsHelpers-de833af9.js";import"./XMarkIcon-9b6fa05a.js";function Ie(o,l){return n(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function Ae(o,l){return n(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})])}function Pe(o,l){return n(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})])}function oe(o,l){return n(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M5.85 3.5a.75.75 0 00-1.117-1 9.719 9.719 0 00-2.348 4.876.75.75 0 001.479.248A8.219 8.219 0 015.85 3.5zM19.267 2.5a.75.75 0 10-1.118 1 8.22 8.22 0 011.987 4.124.75.75 0 001.48-.248A9.72 9.72 0 0019.266 2.5z"}),e("path",{"fill-rule":"evenodd",d:"M12 2.25A6.75 6.75 0 005.25 9v.75a8.217 8.217 0 01-2.119 5.52.75.75 0 00.298 1.206c1.544.57 3.16.99 4.831 1.243a3.75 3.75 0 107.48 0 24.583 24.583 0 004.83-1.244.75.75 0 00.298-1.205 8.217 8.217 0 01-2.118-5.52V9A6.75 6.75 0 0012 2.25zM9.75 18c0-.034 0-.067.002-.1a25.05 25.05 0 004.496 0l.002.1a2.25 2.25 0 11-4.5 0z","clip-rule":"evenodd"})])}var ze=(o=>(o[o.Open=0]="Open",o[o.Closed=1]="Closed",o))(ze||{});let pe=Symbol("DisclosureContext");function Q(o){let l=de(pe,null);if(l===null){let g=new Error(`<${o} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,Q),g}return l}let me=Symbol("DisclosurePanelContext");function Be(){return de(me,null)}let Ne=Z({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(o,{slots:l,attrs:g}){let d=y(o.defaultOpen?0:1),s=y(null),D=y(null),u={buttonId:y(`headlessui-disclosure-button-${te()}`),panelId:y(`headlessui-disclosure-panel-${te()}`),disclosureState:d,panel:s,button:D,toggleDisclosure(){d.value=se(d.value,{0:1,1:0})},closeDisclosure(){d.value!==1&&(d.value=1)},close(h){u.closeDisclosure();let w=(()=>h?h instanceof HTMLElement?h:h.value instanceof HTMLElement?K(h):K(u.button):K(u.button))();w==null||w.focus()}};return ie(pe,u),Se(V(()=>se(d.value,{0:q.Open,1:q.Closed}))),()=>{let{defaultOpen:h,...w}=o,S={open:d.value===0,close:u.close};return J({theirProps:w,ourProps:{},slot:S,slots:l,attrs:g,name:"Disclosure"})}}}),He=Z({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(o,{attrs:l,slots:g,expose:d}){let s=Q("DisclosureButton"),D=Be(),u=V(()=>D===null?!1:D.value===s.panelId.value);W(()=>{u.value||o.id!==null&&(s.buttonId.value=o.id)}),ce(()=>{u.value||(s.buttonId.value=null)});let h=y(null);d({el:h,$el:h}),u.value||_e(()=>{s.button.value=h.value});let w=Te(V(()=>({as:o.as,type:l.type})),h);function S(){var m;o.disabled||(u.value?(s.toggleDisclosure(),(m=K(s.button))==null||m.focus()):s.toggleDisclosure())}function O(m){var I;if(!o.disabled)if(u.value)switch(m.key){case R.Space:case R.Enter:m.preventDefault(),m.stopPropagation(),s.toggleDisclosure(),(I=K(s.button))==null||I.focus();break}else switch(m.key){case R.Space:case R.Enter:m.preventDefault(),m.stopPropagation(),s.toggleDisclosure();break}}function z(m){switch(m.key){case R.Space:m.preventDefault();break}}return()=>{var m;let I={open:s.disclosureState.value===0},{id:k,...A}=o,x=u.value?{ref:h,type:w.value,onClick:S,onKeydown:O}:{id:(m=s.buttonId.value)!=null?m:k,ref:h,type:w.value,"aria-expanded":s.disclosureState.value===0,"aria-controls":s.disclosureState.value===0||K(s.panel)?s.panelId.value:void 0,disabled:o.disabled?!0:void 0,onClick:S,onKeydown:O,onKeyup:z};return J({ourProps:x,theirProps:A,slot:I,attrs:l,slots:g,name:"DisclosureButton"})}}}),Le=Z({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(o,{attrs:l,slots:g,expose:d}){let s=Q("DisclosurePanel");W(()=>{o.id!==null&&(s.panelId.value=o.id)}),ce(()=>{s.panelId.value=null}),d({el:s.panel,$el:s.panel}),ie(me,s.panelId);let D=Me(),u=V(()=>D!==null?(D.value&q.Open)===q.Open:s.disclosureState.value===0);return()=>{var h;let w={open:s.disclosureState.value===0,close:s.close},{id:S,...O}=o,z={id:(h=s.panelId.value)!=null?h:S,ref:s.panel};return J({ourProps:z,theirProps:O,slot:w,attrs:l,slots:g,features:le.RenderStrategy|le.Static,visible:u.value,name:"DisclosurePanel"})}}});function ne(o,l){return n(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M9.493 2.853a.75.75 0 00-1.486-.205L7.545 6H4.198a.75.75 0 000 1.5h3.14l-.69 5H3.302a.75.75 0 000 1.5h3.14l-.435 3.148a.75.75 0 001.486.205L7.955 14h2.986l-.434 3.148a.75.75 0 001.486.205L12.456 14h3.346a.75.75 0 000-1.5h-3.14l.69-5h3.346a.75.75 0 000-1.5h-3.14l.435-3.147a.75.75 0 00-1.486-.205L12.045 6H9.059l.434-3.147zM8.852 7.5l-.69 5h2.986l.69-5H8.852z","clip-rule":"evenodd"})])}const Ee={class:"min-h-full h-screen"},Ke={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Fe={class:"relative flex h-16 items-center justify-between"},Re={class:"flex items-center"},Ve=["src"],qe={key:1,class:"text-secondary-500 px-3 text-xl font-fancy leading-6 font-medium"},We={class:"flex flex-1 justify-center px-2 lg:ml-6 lg:justify-end"},Ue={key:0,class:"flex items-center space-x-2"},Ye=e("span",{class:"sr-only"},"Kitchen Running",-1),Ge=["innerHTML"],Xe={class:"flex lg:hidden"},Ze=e("span",{class:"sr-only"},"Open main menu",-1),Je={class:"hidden lg:ml-4 lg:block"},Qe={class:"flex items-center"},et=["src"],tt={class:"hidden ml-3 text-gray-700 text-sm font-medium lg:block"},st=e("span",{class:"sr-only"},"Open user menu for ",-1),lt={class:"mx-4 mt-3 px-3 py-1 flex items-center justify-between border border-dashed border-slate-400 space-x-2"},at=e("p",{class:"text-sm"},"Avg Target",-1),ot={class:"truncate"},nt={class:"py-1"},rt={class:"border-t border-slate-200 pt-4 pb-3"},it={class:"flex items-center px-5"},ct={class:"flex-shrink-0"},dt=["src"],ut={class:"ml-3"},ft={class:"text-base font-medium text-slate-800"},ht={class:"text-sm font-medium text-slate-500"},pt={type:"button",class:"ml-auto flex-shrink-0 rounded-full bg-slate-50 p-1 text-slate-400 hover:text-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-slate-50"},mt=e("span",{class:"sr-only"},"View notifications",-1),_t={class:"mx-4 mt-3 px-3 py-1 flex items-center justify-between border border-dashed border-slate-400 space-x-2"},xt=e("p",{class:"text-sm"},"Avg Target",-1),gt={class:"truncate"},vt={class:"py-1"},bt={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},wt={class:"relative z-10 flex py-3 sm:h-16 flex-shrink-0 bg-white overflow-x-auto"},yt={class:"px-2 w-full flex flex-row sm:items-center"},kt={role:"list",class:"relative w-full max-h-40 flex gap-2.5 sm:flex-wrap z-0 overflow-x-auto sm:overflow-y-auto px-1 py-3"},$t={class:"flex-1 min-w-0 flex justify-center items-center"},Ct={class:j(["text-sm leading-5 font-medium capitalize"])},Dt={class:""},St={__name:"KitchenLayout",setup(o){var I;const l=ue(),g=fe({status:l.props.kitchen?"stop":"start"}),d=he(l.props.order_productions.length>0?l.props.order_productions[0]:{order_id:null}),s=y((I=l.props.kitchen)==null?void 0:I.started_at),D=y(null),u=y(!1),h=y(l.props.auth.user.is_cook);W(()=>{O()});const w=y(null);w.value=setInterval(function(){window.location.reload()},1*60*1e3);const S=()=>{l.props.alertMessage={},g.post(route("kitchen.clock"),{onSuccess:()=>{var k;console.log(g),u.value=!1,D.value="",g.status=="stop"?(s.value=null,g.status="start"):(s.value=(k=l.props.kitchen)==null?void 0:k.started_at,g.status="stop")},onFinish:()=>{O()}})};function O(){console.log("count up"),s.value?u.value=setInterval(function(){D.value=z(new Date(s.value).getTime())},1e3):u.value&&clearInterval(u.value)}const z=k=>{var A=new Date().getTime()-k;let x=Math.floor(A/(1e3*60*60*24)),v=Math.floor(A%(1e3*60*60*24)/(1e3*60*60)),b=Math.floor(A%(1e3*60*60)/(1e3*60)),i=Math.floor(A%(1e3*60)/1e3),P="";return x&&(P+=x+"<span class='mr-2 text-xs text-gray-700 uppercase'>days</span>"),v&&(P+=v+"<span class='mr-2 text-xs text-gray-700 uppercase'>hrs</span>"),b&&(P+=b+"<span class='mr-2 text-xs text-gray-700 uppercase'>mins</span>"),i&&(P+=i+"<span class='mr-2 text-xs text-gray-700 uppercase'>secs</span>"),P},m=[{name:"Kitchen Clock Logs",href:route("kitchen.index")},{name:"Yesterday Kitchen",href:route("production.index",{date:"yesterday"})},{name:"Logout",href:route("logout"),as:"button",method:"POST"}];return(k,A)=>(n(),c("div",Ee,[f(a(Ne),{as:"nav",class:"bg-yellow-50 border-b border-yellow-100"},{default:$(({open:x})=>[e("div",Ke,[e("div",Fe,[e("div",Re,[f(a(E),{href:"/",class:"flex-shrink-0"},{default:$(()=>[a(l).props.app.logo?(n(),c("img",{key:0,class:"h-16 w-auto",src:a(l).props.app.logo,alt:"logo"},null,8,Ve)):(n(),c("span",qe,r(a(l).props.app.name),1))]),_:1}),a(l).props.navigation.routes.includes("pos.create")?(n(),X(a(E),{key:0,href:k.route("pos.create"),class:"ml-6 inline-flex items-center rounded border border-transparent bg-yellow-500 px-4 py-1.5 text-sm font-medium text-white shadow-sm hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2"},{default:$(()=>[f(a(ye),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),C(" POS ")]),_:1},8,["href"])):ee("",!0)]),e("div",We,[u.value?(n(),c("div",Ue,[Ye,e("p",{class:"truncate text-lg font-medium text-red-500",innerHTML:D.value??"Â "},null,8,Ge)])):ee("",!0),M(e("button",{type:"button",onClick:S,class:j(["inline-flex items-center rounded border border-transparent px-4 py-1.5 text-sm font-medium text-white shadow-sm  focus:outline-none focus:ring-2  focus:ring-offset-2",u.value?"bg-red-500 hover:bg-red-700 focus:ring-red-500":"bg-green-500 hover:bg-green-700 focus:ring-green-500"])},[f(a(Pe),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),C(" "+r(u.value?"OFF":"ON"),1)],2),[[T,h.value]])]),e("div",Xe,[f(a(He),{class:"inline-flex items-center justify-center rounded-md bg-yellow-50 p-2 text-yellow-400 hover:bg-yellow-100 hover:text-yellow-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-yellow-50"},{default:$(()=>[Ze,x?(n(),X(a(ae),{key:1,class:"block h-6 w-6","aria-hidden":"true"})):(n(),X(a(Ie),{key:0,class:"block h-6 w-6","aria-hidden":"true"}))]),_:2},1024)]),e("div",Je,[e("div",Qe,[f(a(ke),{as:"div",class:"relative ml-3 flex-shrink-0"},{default:$(()=>[e("div",null,[f(a($e),{class:"max-w-xs bg-inherit rounded-full flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 lg:p-2 lg:rounded-md"},{default:$(()=>[e("img",{class:"object-cover h-8 w-8 rounded-full",src:a(l).props.auth.user.image_url,alt:"Image path"},null,8,et),e("span",tt,[st,C(" "+r(a(l).props.auth.user.name),1)]),f(a(je),{class:"hidden shrink-0 ml-1 h-5 w-5 text-gray-400 lg:block","aria-hidden":"true"})]),_:1})]),f(xe,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:$(()=>[f(a(Ce),{class:"absolute right-0 z-20 mt-2 w-64 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:$(()=>[e("div",lt,[at,e("p",ot,r(a(l).props.average_time),1)]),e("div",nt,[(n(),c(B,null,L(m,v=>f(a(De),{key:v.name},{default:$(({active:b})=>[f(a(E),{href:v.href,as:v.as,method:v.method,class:j([b?"bg-slate-100":"","block w-full text-left py-2 px-4 text-sm text-slate-700"])},{default:$(()=>[C(r(v.name),1)]),_:2},1032,["href","as","method","class"])]),_:2},1024)),64))])]),_:1})]),_:1})]),_:1})])])])]),f(a(Le),{class:"border-b border-slate-200 bg-slate-50 lg:hidden"},{default:$(()=>[e("div",rt,[e("div",it,[e("div",ct,[e("img",{class:"h-10 w-10 rounded-full",src:a(l).props.auth.user.image_url,alt:""},null,8,dt)]),e("div",ut,[e("div",ft,r(a(l).props.auth.user.name),1),e("div",ht,r(a(l).props.auth.user.email),1)]),e("button",pt,[mt,f(a(Ae),{class:"h-6 w-6","aria-hidden":"true"})])]),e("div",_t,[xt,e("p",gt,r(a(l).props.average_time),1)]),e("div",vt,[(n(),c(B,null,L(m,v=>f(a(E),{key:v.name,href:v.href,as:v.as,method:v.method,class:j([k.active?"bg-slate-100":"","block w-full text-left py-2 px-4 text-sm text-slate-700"])},{default:$(()=>[C(r(v.name),1)]),_:2},1032,["href","as","method","class"])),64))])])]),_:1})]),_:1}),e("header",bt,[e("div",wt,[e("div",yt,[e("ul",kt,[(n(!0),c(B,null,L(a(l).props.pending_orders,(x,v)=>(n(),c("li",{key:v},[e("div",$t,[f(a(E),{href:k.route("production.index",{order_id:x.id}),class:j(["inline-flex items-center gap-x-1.5 rounded-md bg-indigo-50 px-2 py-1.5 text-sm font-medium text-indigo-600 shadow-sm hover:bg-indigo-100 border",x.status=="pending"?"bg-yellow-100 border-yellow-200 text-yellow-900 hover:bg-yellow-200":"border-indigo-200",d.order_id==x.id?"ring-2 ring-secondary-500 ring-offset-2":""])},{default:$(()=>[e("p",Ct,r([x.invoice_number.substr(6),x.table_name].filter(b=>b).join(" - ")),1)]),_:2},1032,["href","class"]),M(f(a(E),{href:k.route("production.index"),class:"ml-3 focus:ring-2 focus:ring-offset-1 focus:ring-orange-500"},{default:$(()=>[f(a(ae),{class:"h-5 w-5","aria-hidden":"true"})]),_:2},1032,["href"]),[[T,d.order_id==x.id]])])]))),128))])])])]),e("main",Dt,[ge(k.$slots,"default")])]))}},re="/build/assets/facility-alarm-908-ab78b208.wav",Mt={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Tt={class:"px-4 sm:px-0"},jt={class:"px-2 flex-1 flex flex-col w-full shrink-0 bg-white overflow-x-auto"},Ot={class:"flex pb-32 gap-5"},It={class:"flex border-2 border-blue-500 rounded-lg gap-5"},At={class:"relative w-64 lg:w-80 flex-1 flex flex-col text-sm text-slate-900"},Pt={class:"absolute mt-2 mr-2 right-0 flex justify-center items-center bg-red-600 w-10 h-10 rounded-full"},zt=["onClick"],Bt={class:"flex font-semibold text-lg leading-5 text-slate-700"},Nt={class:"mt-2 leading-5 text-slate-700"},Ht={key:0,class:"flex-1 flex flex-col overflow-y-auto py-6 h-48 lg:h-72"},Lt={class:"flex items-start py-1 space-x-3"},Et={class:"w-6 h-6 flex items-center justify-center capitalize rounded-full border border-slate-700 text-sm"},Kt={class:"flex-1 capitalize font-medium text-sm lg:text-base"},Ft={class:"relative h-6 flex items-center justify-start border border-l-0 rounded-full bg-lime-500 border-slate-700 font-medium text-lime-900 space-x-1"},Rt={class:"w-6 h-6 flex items-center justify-center rounded-full bg-white border border-slate-700"},Vt={class:""},qt=e("span",{class:"pr-1.5 text-xs"},"pcs",-1),Wt={key:1,class:"flex-1 flex flex-col overflow-y-auto py-6 h-72"},Ut=e("li",{class:"flex items-center border-t border-slate-400/20 py-3"},[e("p",{class:"text-sm text-center font-medium text-red-800 bg-red-50 w-full px-4 py-2"},"Not found")],-1),Yt=[Ut],Gt={class:"flex flex-col space-y-1"},Xt=e("label",{class:"text-xs font-semibold uppercase"},"Note :",-1),Zt={class:"py-1 px-2 h-8 flex items-start border border-dashed border-slate-700 leading-5 text-slate-700"},Jt={class:"absolute bottom-0 w-full -mb-28 px-3 py-3 h-32 flex flex-col justify-center items-center"},Qt={class:"mt-4 text-base font-medium"},es={class:"text-base font-medium"},ts={key:0,class:"text-lg font-medium text-slate-800"},ss={class:""},ls={class:"flex border-2 border-transparent rounded-lg gap-5"},as={class:"relative w-64 lg:w-80 flex-1 flex flex-col text-sm text-slate-900"},os={class:"absolute mt-2 mr-2 right-0 flex justify-center items-center bg-red-600 w-10 h-10 rounded-full"},ns=["onClick"],rs={class:"flex font-semibold text-lg leading-5 text-slate-700"},is={class:"mt-2 leading-5 text-slate-700"},cs={key:0,class:"flex-1 flex flex-col overflow-y-auto py-6 h-48 lg:h-72"},ds={class:"flex items-start py-1 space-x-3"},us={class:"w-6 h-6 flex items-center justify-center capitalize rounded-full border border-slate-700 text-sm"},fs={class:"flex-1 capitalize font-medium text-sm lg:text-base"},hs={class:"relative h-6 flex items-center justify-start border border-l-0 rounded-full bg-lime-500 border-slate-700 font-medium text-lime-900 space-x-1"},ps={class:"w-6 h-6 flex items-center justify-center rounded-full bg-white border border-slate-700"},ms={class:""},_s=e("span",{class:"pr-1.5 text-xs"},"pcs",-1),xs={key:1,class:"flex-1 flex flex-col overflow-y-auto py-6 h-72"},gs=e("li",{class:"flex items-center border-t border-slate-400/20 py-3"},[e("p",{class:"text-sm text-center font-medium text-red-800 bg-red-50 w-full px-4 py-2"},"Not found")],-1),vs=[gs],bs={class:"flex flex-col space-y-1"},ws=e("label",{class:"text-xs font-semibold uppercase"},"Note :",-1),ys={class:"py-1 px-2 h-8 flex items-start border border-dashed border-slate-700 leading-5 text-slate-700"},ks={class:"absolute bottom-0 w-full -mb-28 px-3 py-3 h-32 flex flex-col justify-center items-center"},$s={class:"mt-4 text-base font-medium"},Cs={class:"text-base font-medium"},Ds={key:0,class:"text-lg font-medium text-slate-800"},Ss={class:""},Ms={class:"w-full"},Ts=e("div",{class:"flex items-center py-3"},[e("p",{class:"text-base text-center font-medium text-red-800 bg-red-50 w-full px-4 py-2"},"Production order empty. No order found!")],-1),js=[Ts],Es={__name:"Production",props:{auth:Object,productions:Array,order_productions:Array},setup(o){const l=o,g=ue(),d=fe({production_id:"",status:""}),s=he({isAlarming:!1,seconds:null,time:null}),D=y(null),u=y(null),h=y(null),w=y(l.auth.user.is_cook),S=y(l.auth.user.is_waiter),O=y(!!g.props.kitchen),z=()=>{h.value&&clearInterval(h.value),h.value=setInterval(function(){let i=new Date().getHours(),P=new Date().getMinutes(),t=new Date().getSeconds();s.time=i+":"+P+":"+t,s.seconds=t,s.isAlarming=[0,1,2].includes(t),w.value&&s.seconds==0&&l.productions.find(p=>p.status=="pending"&&!p.is_viewed)&&new Audio(re).play(),S.value&&s.seconds==0&&l.productions.find(p=>p.waiter_alert)&&new Audio(re).play()},1e3)};W(()=>{v(),z()}),ve(()=>{v(),z()}),be(()=>D.value,i=>{d.production_id=i==null?void 0:i.id,w.value&&!i.is_viewed&&(g.props.alertMessage={},d.post(route("production.view"),{onSuccess:()=>{},onFinish:()=>{d.reset()}}))});const m=i=>{console.log(i),D.value=i},I=i=>(console.log("isOrderWaiting",i),w.value&&!i.is_viewed||S.value&&i.waiter_alert),k=i=>(console.log("isOrderChangeable",i),console.log(i.id,d.production_id),console.log(w.value,i.is_viewed,O.value,i.status!="complete"),i.id==d.production_id&&(S.value&&i.waiter_alert||w.value&&i.is_viewed&&O.value&&i.status!="complete")),A=()=>{d.status="next",w.value?(g.props.alertMessage={},d.post(route("production.status"),{onSuccess:()=>{},onFinish:()=>{d.reset()}})):S.value?(g.props.alertMessage={},d.post(route("production.delivered"),{onSuccess:()=>{},onFinish:()=>{d.reset()}})):alert("Only Waiter and chef / barista can change production status")};function x(i){return new Date(i).getTime()}function v(){u.value&&clearInterval(u.value);let i=l.productions,P=l.order_productions;u.value=setInterval(function(){i.forEach(t=>{var p=new Date().getTime(),_=p-x(t.created_at);_=t.accepted_at?p-x(t.accepted_at):_,_=t.completed_at?p-x(t.completed_at):_;var N=Math.floor(_%(1e3*60*60*24)/(1e3*60*60)),H=Math.floor(_%(1e3*60*60)/(1e3*60)),F=Math.floor(_%(1e3*60)/1e3);let U=F?F+" Secs":"",Y=H?H+" Mins ":"",G=N?N+" Hrs ":"";H!=""||N!=""?t.calculated_time=G+Y:t.calculated_time=U}),P.forEach(t=>{var p=new Date().getTime(),_=p-x(t.created_at);_=t.accepted_at?p-x(t.accepted_at):_,_=t.completed_at?p-x(t.completed_at):_;var N=Math.floor(_%(1e3*60*60*24)/(1e3*60*60)),H=Math.floor(_%(1e3*60*60)/(1e3*60)),F=Math.floor(_%(1e3*60)/1e3);let U=F?F+" Secs":"",Y=H?H+" Mins ":"",G=N?N+" Hrs ":"";H!=""||N!=""?t.calculated_time=G+Y:t.calculated_time=U})},1e3)}const b={pending:{notifyText:"Waiting",notifyClass:"text-yellow-800",switchClass:"bg-yellow-200 text-stone-800",cardClassNotViewed:"bg-yellow-100 shadow-stone-300",cardClass:"bg-green-100 shadow-green-700",buttonText:"Accept",buttonClass:"bg-green-600 hover:bg-green-700 text-white text-lg shadow-green-700 focus:ring-green-600"},accept:{notifyText:"Cooking",notifyClass:"text-red-500",switchClass:"bg-green-300 text-stone-800",cardClass:"bg-blue-100 shadow-stone-300",buttonText:"Set Done",buttonClass:"bg-blue-600 hover:bg-blue-700 text-white text-lg shadow-blue-700 focus:ring-blue-600"},complete:{notifyText:"Finished",notifyClass:"text-neutral-800",switchClass:"bg-neutral-100 text-neutral-800",cardClass:"bg-neutral-100 shadow-stone-300",buttonText:"Delivered",buttonClass:"bg-yellow-600 hover:bg-yellow-700 text-white text-lg shadow-yellow-700 focus:ring-yellow-600"}};return(i,P)=>(n(),c(B,null,[f(a(we),{title:"Kitchen"}),f(St,null,{default:$(()=>[e("div",Mt,[f(Oe),e("div",Tt,[e("div",jt,[e("section",Ot,[M(e("div",It,[(n(!0),c(B,null,L(o.order_productions,t=>(n(),c("div",{key:t.id,class:"relative focus:outline-none"},[e("div",At,[M(e("div",Pt,[f(a(oe),{class:j([s.isAlarming?"animate-wiggle":"","w-7 h-7 text-yellow-100"])},null,8,["class"])],512),[[T,I(t)]]),e("div",{onClick:p=>m(t),class:j(["px-4 py-4 rounded-lg shadow-slate-400/50",t.id==a(d).production_id?"shadow-lg":"shadow",t.is_viewed?b[t.status].cardClass:b[t.status].cardClassNotViewed])},[e("h2",Bt,[C(" Order "),f(a(ne),{class:"ml-2 h-5 w-5","aria-hidden":"true"}),C(" "+r(t.order_number.substr(6)),1)]),e("p",Nt,"Ref: "+r(t.stuff_name),1),t?(n(),c("ul",Ht,[(n(!0),c(B,null,L((t==null?void 0:t.items.data)??[],(p,_)=>M((n(),c("li",{key:_},[e("div",Lt,[e("div",Et,r(parseInt(_)+1),1),e("div",Kt,r(p.product_name),1),e("div",Ft,[e("div",Rt,[e("span",Vt,r(p.quantity),1)]),qt])])])),[[T,p.quantity!=0]])),128))])):(n(),c("ul",Wt,Yt)),e("div",Gt,[Xt,e("p",Zt,r(t.order_note),1)])],10,zt),e("div",Jt,[M(e("button",{onClick:A,type:"button",class:j([b[t.status].buttonClass,"inline-flex items-center px-10 py-1.5 border border-transparent shadow-md text-lg uppercase tracking-widest font-medium rounded text-white focus:outline-none focus:ring-2 focus:ring-offset-2"])},r(b[t.status].buttonText),3),[[T,k(t)]]),e("p",Qt,[C(" Order time: "),e("span",null,r(t.created_at_format),1)]),M(e("p",es,[C(" Duration: "),e("span",null,r(t.time_duration),1)],512),[[T,t.completed_at]]),t.delivered_at?(n(),c("h3",ts,"Delivered")):(n(),c("h3",{key:1,class:j(["text-lg font-medium",b[t.status].notifyClass])},[C(r(t.calculated_time)+" ",1),e("span",ss,r(b[t.status].notifyText),1)],2))])])]))),128))],512),[[T,o.order_productions.length>0]]),M(e("div",ls,[(n(!0),c(B,null,L(o.productions,t=>(n(),c("div",{key:t.id,class:"relative focus:outline-none"},[e("div",as,[M(e("div",os,[f(a(oe),{class:j([s.isAlarming?"animate-wiggle":"","w-7 h-7 text-yellow-100"])},null,8,["class"])],512),[[T,I(t)]]),e("div",{onClick:p=>m(t),class:j(["px-4 py-4 rounded-lg shadow-slate-400/50",t.id==a(d).production_id?"shadow-lg":"shadow",t.is_viewed?b[t.status].cardClass:b[t.status].cardClassNotViewed])},[e("h2",rs,[C(" Order "),f(a(ne),{class:"ml-2 h-5 w-5","aria-hidden":"true"}),C(" "+r(t.order_number.substr(6)),1)]),e("p",is,"Ref: "+r(t.stuff_name),1),t?(n(),c("ul",cs,[(n(!0),c(B,null,L(t.items.data,(p,_)=>M((n(),c("li",{key:_},[e("div",ds,[e("div",us,r(parseInt(_)+1),1),e("div",fs,r(p.product_name),1),e("div",hs,[e("div",ps,[e("span",ms,r(p.quantity),1)]),_s])])])),[[T,p.quantity!=0]])),128))])):(n(),c("ul",xs,vs)),e("div",bs,[ws,e("p",ys,r(t.order_note),1)])],10,ns),e("div",ks,[M(e("button",{type:"button",onClick:A,class:j([b[t.status].buttonClass,"inline-flex items-center px-10 py-1.5 border border-transparent shadow-md text-lg uppercase tracking-widest font-medium rounded text-white focus:outline-none focus:ring-2 focus:ring-offset-2"])},r(b[t.status].buttonText),3),[[T,k(t)]]),e("p",$s,[C(" Order time: "),e("span",null,r(t.created_at_format),1)]),M(e("p",Cs,[C(" Duration: "),e("span",null,r(t.time_duration),1)],512),[[T,t.completed_at]]),t.delivered_at?(n(),c("h3",Ds,"Delivered")):(n(),c("h3",{key:1,class:j(["text-lg font-medium",b[t.status].notifyClass])},[C(r(t.calculated_time)+" ",1),e("span",Ss,r(b[t.status].notifyText),1)],2))])])]))),128))],512),[[T,o.productions.length>0]]),M(e("div",Ms,js,512),[[T,o.productions.length==0&&o.order_productions.length==0]])])])])])]),_:1})],64))}};export{Es as default};
