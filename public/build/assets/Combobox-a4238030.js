import{u as $,o as R,y as se,e as de,l as Y,K as pe,H as K,f as ue,t as Q,m as ve,a as W,p as be,O as ce,b as E}from"./use-outside-click-e0c0d3b1.js";import{x as fe,a as V,b as me,u as xe}from"./use-text-value-ed13f69d.js";import{p as ge}from"./menu-d79329d0.js";import{f as ye,a as Oe}from"./hidden-2febf338.js";import{d as Se,e as he,r as Re}from"./use-controllable-bc8024f1.js";import{o as Ce,n as Ie}from"./transition-a46c0b1d.js";import{H as U,A as k,h as m,S as x,L as Pe,k as te,E as X,J as oe,F as ie,G as ee,I as Ve,M as we,Q as M,o as J,c as _,w as z,a as G,d as Te,t as ae,n as j,u as L,b as Z,f as le,r as ke,g as ne}from"./app-43394236.js";import{r as Ae}from"./ChevronUpDownIcon-5cd8b824.js";function Ee(o,O){return o===O}var Fe=(o=>(o[o.Open=0]="Open",o[o.Closed=1]="Closed",o))(Fe||{}),Be=(o=>(o[o.Single=0]="Single",o[o.Multi=1]="Multi",o))(Be||{}),De=(o=>(o[o.Pointer=0]="Pointer",o[o.Other=1]="Other",o))(De||{});let re=Symbol("ComboboxContext");function q(o){let O=we(re,null);if(O===null){let f=new Error(`<${o} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(f,q),f}return O}let Ne=U({name:"Combobox",emits:{"update:modelValue":o=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ee},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(o,{slots:O,attrs:f,emit:C}){let e=k(1),t=k(null),p=k(null),i=k(null),l=k(null),v=k({static:!1,hold:!1}),b=k([]),g=k(null),w=k(1),T=k(!1);function D(n=s=>s){let s=g.value!==null?b.value[g.value]:null,d=ce(n(b.value.slice()),c=>R(c.dataRef.domRef)),u=s?d.indexOf(s):null;return u===-1&&(u=null),{options:d,activeOptionIndex:u}}let F=m(()=>o.multiple?1:0),y=m(()=>o.nullable),[a,S]=Se(m(()=>o.modelValue),n=>C("update:modelValue",n),m(()=>o.defaultValue)),h=m(()=>a.value===void 0?$(F.value,{1:[],0:void 0}):a.value),A=null,I=null,r={comboboxState:e,value:h,mode:F,compare(n,s){if(typeof o.by=="string"){let d=o.by;return(n==null?void 0:n[d])===(s==null?void 0:s[d])}return o.by(n,s)},defaultValue:m(()=>o.defaultValue),nullable:y,inputRef:p,labelRef:t,buttonRef:i,optionsRef:l,disabled:m(()=>o.disabled),options:b,change(n){S(n)},activeOptionIndex:m(()=>{if(T.value&&g.value===null&&b.value.length>0){let n=b.value.findIndex(s=>!s.dataRef.disabled);n!==-1&&(g.value=n)}return g.value}),activationTrigger:w,optionsPropsRef:v,closeCombobox(){T.value=!1,!o.disabled&&e.value!==1&&(e.value=1,g.value=null)},openCombobox(){if(T.value=!0,o.disabled||e.value===0)return;let n=b.value.findIndex(s=>{let d=x(s.dataRef.value);return $(F.value,{0:()=>r.compare(x(r.value.value),x(d)),1:()=>x(r.value.value).some(u=>r.compare(x(u),x(d)))})});n!==-1&&(g.value=n),e.value=0},goToOption(n,s,d){T.value=!1,A!==null&&cancelAnimationFrame(A),A=requestAnimationFrame(()=>{if(o.disabled||l.value&&!v.value.static&&e.value===1)return;let u=D();if(u.activeOptionIndex===null){let P=u.options.findIndex(H=>!H.dataRef.disabled);P!==-1&&(u.activeOptionIndex=P)}let c=fe(n===V.Specific?{focus:V.Specific,id:s}:{focus:n},{resolveItems:()=>u.options,resolveActiveIndex:()=>u.activeOptionIndex,resolveId:P=>P.id,resolveDisabled:P=>P.dataRef.disabled});g.value=c,w.value=d??1,b.value=u.options})},selectOption(n){let s=b.value.find(u=>u.id===n);if(!s)return;let{dataRef:d}=s;S($(F.value,{0:()=>d.value,1:()=>{let u=x(r.value.value).slice(),c=x(d.value),P=u.findIndex(H=>r.compare(c,x(H)));return P===-1?u.push(c):u.splice(P,1),u}}))},selectActiveOption(){if(r.activeOptionIndex.value===null)return;let{dataRef:n,id:s}=b.value[r.activeOptionIndex.value];S($(F.value,{0:()=>n.value,1:()=>{let d=x(r.value.value).slice(),u=x(n.value),c=d.findIndex(P=>r.compare(u,x(P)));return c===-1?d.push(u):d.splice(c,1),d}})),r.goToOption(V.Specific,s)},registerOption(n,s){I&&cancelAnimationFrame(I);let d={id:n,dataRef:s},u=D(c=>(c.push(d),c));if(g.value===null){let c=s.value.value;$(F.value,{0:()=>r.compare(x(r.value.value),x(c)),1:()=>x(r.value.value).some(P=>r.compare(x(P),x(c)))})&&(u.activeOptionIndex=u.options.indexOf(d))}b.value=u.options,g.value=u.activeOptionIndex,w.value=1,u.options.some(c=>!R(c.dataRef.domRef))&&(I=requestAnimationFrame(()=>{let c=D();b.value=c.options,g.value=c.activeOptionIndex}))},unregisterOption(n){var s;r.activeOptionIndex.value!==null&&((s=r.options.value[r.activeOptionIndex.value])==null?void 0:s.id)===n&&(T.value=!0);let d=D(u=>{let c=u.findIndex(P=>P.id===n);return c!==-1&&u.splice(c,1),u});b.value=d.options,g.value=d.activeOptionIndex,w.value=1}};se([p,i,l],()=>r.closeCombobox(),m(()=>e.value===0)),Pe(re,r),de(m(()=>$(e.value,{0:Y.Open,1:Y.Closed})));let B=m(()=>r.activeOptionIndex.value===null?null:b.value[r.activeOptionIndex.value].dataRef.value),N=m(()=>{var n;return(n=R(p))==null?void 0:n.closest("form")});return te(()=>{X([N],()=>{if(!N.value||o.defaultValue===void 0)return;function n(){r.change(o.defaultValue)}return N.value.addEventListener("reset",n),()=>{var s;(s=N.value)==null||s.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,disabled:s,form:d,...u}=o,c={open:e.value===0,disabled:s,activeIndex:r.activeOptionIndex.value,activeOption:B.value,value:h.value};return oe(ie,[...n!=null&&h.value!=null?he({[n]:h.value}).map(([P,H])=>oe(ye,pe({features:Oe.Hidden,key:P,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:d,name:P,value:H}))):[],K({theirProps:{...f,...ue(u,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:c,slots:O,attrs:f,name:"Combobox"})])}}}),$e=U({name:"ComboboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-combobox-label-${Q()}`}},setup(o,{attrs:O,slots:f}){let C=q("ComboboxLabel");function e(){var t;(t=R(C.inputRef))==null||t.focus({preventScroll:!0})}return()=>{let t={open:C.comboboxState.value===0,disabled:C.disabled.value},{id:p,...i}=o,l={id:p,ref:C.labelRef,onClick:e};return K({ourProps:l,theirProps:i,slot:t,attrs:O,slots:f,name:"ComboboxLabel"})}}}),Le=U({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${Q()}`}},setup(o,{attrs:O,slots:f,expose:C}){let e=q("ComboboxButton");C({el:e.buttonRef,$el:e.buttonRef});function t(l){e.disabled.value||(e.comboboxState.value===0?e.closeCombobox():(l.preventDefault(),e.openCombobox()),M(()=>{var v;return(v=R(e.inputRef))==null?void 0:v.focus({preventScroll:!0})}))}function p(l){switch(l.key){case E.ArrowDown:l.preventDefault(),l.stopPropagation(),e.comboboxState.value===1&&e.openCombobox(),M(()=>{var v;return(v=e.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return;case E.ArrowUp:l.preventDefault(),l.stopPropagation(),e.comboboxState.value===1&&(e.openCombobox(),M(()=>{e.value.value||e.goToOption(V.Last)})),M(()=>{var v;return(v=e.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return;case E.Escape:if(e.comboboxState.value!==0)return;l.preventDefault(),e.optionsRef.value&&!e.optionsPropsRef.value.static&&l.stopPropagation(),e.closeCombobox(),M(()=>{var v;return(v=e.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return}}let i=me(m(()=>({as:o.as,type:O.type})),e.buttonRef);return()=>{var l,v;let b={open:e.comboboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:g,...w}=o,T={ref:e.buttonRef,id:g,type:i.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(l=R(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.comboboxState.value===0,"aria-labelledby":e.labelRef.value?[(v=R(e.labelRef))==null?void 0:v.id,g].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:p,onClick:t};return K({ourProps:T,theirProps:w,slot:b,attrs:O,slots:f,name:"ComboboxButton"})}}}),je=U({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${Q()}`}},emits:{change:o=>!0},setup(o,{emit:O,attrs:f,slots:C,expose:e}){let t=q("ComboboxInput"),p=m(()=>ve(R(t.inputRef))),i={value:!1};e({el:t.inputRef,$el:t.inputRef});function l(){t.change(null);let a=R(t.optionsRef);a&&(a.scrollTop=0),t.goToOption(V.Nothing)}let v=m(()=>{var a;let S=t.value.value;return R(t.inputRef)?typeof o.displayValue<"u"&&S!==void 0?(a=o.displayValue(S))!=null?a:"":typeof S=="string"?S:"":""});te(()=>{X([v,t.comboboxState,p],([a,S],[h,A])=>{if(i.value)return;let I=R(t.inputRef);I&&((A===0&&S===1||a!==h)&&(I.value=a),requestAnimationFrame(()=>{var r;if(i.value||!I||((r=p.value)==null?void 0:r.activeElement)!==I)return;let{selectionStart:B,selectionEnd:N}=I;Math.abs((N??0)-(B??0))===0&&B===0&&I.setSelectionRange(I.value.length,I.value.length)}))},{immediate:!0}),X([t.comboboxState],([a],[S])=>{if(a===0&&S===1){if(i.value)return;let h=R(t.inputRef);if(!h)return;let A=h.value,{selectionStart:I,selectionEnd:r,selectionDirection:B}=h;h.value="",h.value=A,B!==null?h.setSelectionRange(I,r,B):h.setSelectionRange(I,r)}})});let b=k(!1);function g(){b.value=!0}function w(){Ce().nextFrame(()=>{b.value=!1})}function T(a){switch(i.value=!0,a.key){case E.Enter:if(i.value=!1,t.comboboxState.value!==0||b.value)return;if(a.preventDefault(),a.stopPropagation(),t.activeOptionIndex.value===null){t.closeCombobox();return}t.selectActiveOption(),t.mode.value===0&&t.closeCombobox();break;case E.ArrowDown:return i.value=!1,a.preventDefault(),a.stopPropagation(),$(t.comboboxState.value,{0:()=>t.goToOption(V.Next),1:()=>t.openCombobox()});case E.ArrowUp:return i.value=!1,a.preventDefault(),a.stopPropagation(),$(t.comboboxState.value,{0:()=>t.goToOption(V.Previous),1:()=>{t.openCombobox(),M(()=>{t.value.value||t.goToOption(V.Last)})}});case E.Home:if(a.shiftKey)break;return i.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(V.First);case E.PageUp:return i.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(V.First);case E.End:if(a.shiftKey)break;return i.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(V.Last);case E.PageDown:return i.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(V.Last);case E.Escape:if(i.value=!1,t.comboboxState.value!==0)return;a.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&a.stopPropagation(),t.nullable.value&&t.mode.value===0&&t.value.value===null&&l(),t.closeCombobox();break;case E.Tab:if(i.value=!1,t.comboboxState.value!==0)return;t.mode.value===0&&t.selectActiveOption(),t.closeCombobox();break}}function D(a){O("change",a),t.nullable.value&&t.mode.value===0&&a.target.value===""&&l(),t.openCombobox()}function F(){i.value=!1}let y=m(()=>{var a,S,h,A;return(A=(h=(S=o.defaultValue)!=null?S:t.defaultValue.value!==void 0?(a=o.displayValue)==null?void 0:a.call(o,t.defaultValue.value):null)!=null?h:t.defaultValue.value)!=null?A:""});return()=>{var a,S,h,A,I,r;let B={open:t.comboboxState.value===0},{id:N,displayValue:n,onChange:s,...d}=o,u={"aria-controls":(a=t.optionsRef.value)==null?void 0:a.id,"aria-expanded":t.comboboxState.value===0,"aria-activedescendant":t.activeOptionIndex.value===null||(S=t.options.value[t.activeOptionIndex.value])==null?void 0:S.id,"aria-labelledby":(I=(h=R(t.labelRef))==null?void 0:h.id)!=null?I:(A=R(t.buttonRef))==null?void 0:A.id,"aria-autocomplete":"list",id:N,onCompositionstart:g,onCompositionend:w,onKeydown:T,onInput:D,onBlur:F,role:"combobox",type:(r=f.type)!=null?r:"text",tabIndex:0,ref:t.inputRef,defaultValue:y.value,disabled:t.disabled.value===!0?!0:void 0};return K({ourProps:u,theirProps:d,slot:B,attrs:f,slots:C,features:W.RenderStrategy|W.Static,name:"ComboboxInput"})}}}),Me=U({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(o,{attrs:O,slots:f,expose:C}){let e=q("ComboboxOptions"),t=`headlessui-combobox-options-${Q()}`;C({el:e.optionsRef,$el:e.optionsRef}),ee(()=>{e.optionsPropsRef.value.static=o.static}),ee(()=>{e.optionsPropsRef.value.hold=o.hold});let p=be(),i=m(()=>p!==null?(p.value&Y.Open)===Y.Open:e.comboboxState.value===0);return ge({container:m(()=>R(e.optionsRef)),enabled:m(()=>e.comboboxState.value===0),accept(l){return l.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}}),()=>{var l,v,b;let g={open:e.comboboxState.value===0},w={"aria-labelledby":(b=(l=R(e.labelRef))==null?void 0:l.id)!=null?b:(v=R(e.buttonRef))==null?void 0:v.id,id:t,ref:e.optionsRef,role:"listbox","aria-multiselectable":e.mode.value===1?!0:void 0},T=ue(o,["hold"]);return K({ourProps:w,theirProps:T,slot:g,attrs:O,slots:f,features:W.RenderStrategy|W.Static,visible:i.value,name:"ComboboxOptions"})}}}),Ke=U({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(o,{slots:O,attrs:f,expose:C}){let e=q("ComboboxOption"),t=`headlessui-combobox-option-${Q()}`,p=k(null);C({el:p,$el:p});let i=m(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t:!1),l=m(()=>$(e.mode.value,{0:()=>e.compare(x(e.value.value),x(o.value)),1:()=>x(e.value.value).some(y=>e.compare(x(y),x(o.value)))})),v=m(()=>({disabled:o.disabled,value:o.value,domRef:p}));te(()=>e.registerOption(t,v)),Ve(()=>e.unregisterOption(t)),ee(()=>{e.comboboxState.value===0&&i.value&&e.activationTrigger.value!==0&&M(()=>{var y,a;return(a=(y=R(p))==null?void 0:y.scrollIntoView)==null?void 0:a.call(y,{block:"nearest"})})});function b(y){if(o.disabled)return y.preventDefault();e.selectOption(t),e.mode.value===0&&e.closeCombobox(),Ie()||requestAnimationFrame(()=>{var a;return(a=R(e.inputRef))==null?void 0:a.focus()})}function g(){if(o.disabled)return e.goToOption(V.Nothing);e.goToOption(V.Specific,t)}let w=xe();function T(y){w.update(y)}function D(y){w.wasMoved(y)&&(o.disabled||i.value||e.goToOption(V.Specific,t,0))}function F(y){w.wasMoved(y)&&(o.disabled||i.value&&(e.optionsPropsRef.value.hold||e.goToOption(V.Nothing)))}return()=>{let{disabled:y}=o,a={active:i.value,selected:l.value,disabled:y},S={id:t,ref:p,role:"option",tabIndex:y===!0?void 0:-1,"aria-disabled":y===!0?!0:void 0,"aria-selected":l.value,disabled:void 0,onClick:b,onFocus:g,onPointerenter:T,onMouseenter:T,onPointermove:D,onMousemove:D,onPointerleave:F,onMouseleave:F};return K({ourProps:S,theirProps:o,slot:a,attrs:f,slots:O,name:"ComboboxOption"})}}});const Ue={class:"relative w-full"},Xe={__name:"Combobox",props:{placeholder:{type:String,default:"Select ..."},disabled:{type:Boolean,default:!1},items:{type:Array,default:[]},label:{type:String,default:""},modelValue:[Object,Number,String,Boolean],position:{default:"bottom"}},emits:["update:modelValue"],setup(o,{emit:O}){const f=o,C=k(""),e=k(f.items.find(p=>f.modelValue==p.id)??""),t=m(()=>C.value===""?f.items:f.items.filter(p=>(console.log(p),p.name.toLowerCase().includes(C.value.toLowerCase()))));return X(()=>e.value,p=>{O("update:modelValue",p.id)}),O("update:modelValue",e.value.id),(p,i)=>(J(),_(L(Ne),{as:"div",modelValue:e.value,"onUpdate:modelValue":i[1]||(i[1]=l=>e.value=l)},{default:z(()=>[G(L($e),{class:j(["block text-sm font-medium text-gray-700",f.label.length==0?"sr-only":""])},{default:z(()=>[Te(ae(f.label),1)]),_:1},8,["class"]),Z("div",Ue,[G(L(je),{class:j([o.disabled?"bg-gray-100":"","w-full rounded border border-gray-300 bg-white py-2 pl-3 pr-10 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 sm:text-sm"]),onChange:i[0]||(i[0]=l=>C.value=l.target.value),displayValue:l=>l.name,placeholder:o.placeholder,autocomplete:"off",disabled:o.disabled},null,8,["class","displayValue","placeholder","disabled"]),G(L(Le),{class:j([o.disabled?"cursor-default":"","absolute inset-y-0 right-0 flex items-center rounded-r px-2 focus:outline-none"]),disabled:o.disabled},{default:z(()=>[G(L(Ae),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1},8,["class","disabled"]),t.value.length>0?(J(),_(L(Me),{key:0,class:j([o.position=="top"?"bottom-10 mb-1":"mt-1","absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"])},{default:z(()=>[(J(!0),le(ie,null,ke(t.value,l=>(J(),_(L(Ke),{key:l.id,value:l,as:"template"},{default:z(({active:v,selected:b})=>[Z("li",{class:j(["relative cursor-default select-none py-2 pl-3 pr-9",v?"bg-primary-100 text-primary-900":"text-gray-900"])},[Z("span",{class:j(["block truncate",b&&"font-semibold"])},ae(l.name??"N/A"),3),b?(J(),le("span",{key:0,class:j(["absolute inset-y-0 right-0 flex items-center pr-4",v?"text-primary-600":"text-primary-500"])},[G(L(Re),{class:"h-5 w-5","aria-hidden":"true"})],2)):ne("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1},8,["class"])):ne("",!0)])]),_:1},8,["modelValue"]))}};export{Xe as _};
