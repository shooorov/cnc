import{q as T,A as f,k as B,o as x,f as p,a as o,u as b,w as M,F as _,X as N,Z as U,b as t,t as h,e as y,i as w,x as v,d as k,r as E,g as I,O as q,J as l}from"./app-5791f070.js";import{_ as L}from"./Alert-36a35dc3.js";import{B as F}from"./Breadcrumb-f795d3d4.js";import{_ as u}from"./Combobox-538c6060.js";import{_ as J}from"./AuthenticatedLayout-11ec7f50.js";import{r as R}from"./MagnifyingGlassIcon-3f43d731.js";import{r as W}from"./ArrowPathIcon-a2bad1d0.js";import{r as V}from"./ArrowTopRightOnSquareIcon-141440c8.js";import{r as j}from"./PrinterIcon-6d31fed6.js";import{r as A}from"./PencilSquareIcon-8c77acda.js";import{r as S}from"./TrashIcon-06cb6d81.js";import"./_commonjsHelpers-de833af9.js";import"./XMarkIcon-a268bf7e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-outside-click-94eb500d.js";import"./use-text-value-334f6123.js";import"./menu-f75a36ce.js";import"./hidden-5e2b8745.js";import"./use-controllable-b2f1e375.js";import"./transition-10ffcd92.js";import"./ChevronUpDownIcon-65732a63.js";import"./ShoppingBagIcon-426b9f89.js";import"./XMarkIcon-1029282c.js";import"./ChevronDownIcon-fde980d0.js";const z={class:"bg-white shadow"},G={class:"px-4 sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8"},X={class:"py-6 md:flex md:items-center md:justify-between lg:border-t lg:border-gray-200"},Z={class:"flex-1 min-w-0"},H=t("div",{class:"mt-6 h-9 flex space-x-3 md:mt-0 md:ml-4"},null,-1),K={class:"py-5"},Q={class:"max-w-6xl mx-auto sm:px-6 lg:px-8"},Y={class:"bg-white shadow sm:rounded-lg"},tt={class:"flex flex-col sm:flex-row sm:justify-between items-center px-4 py-5 border-b border-gray-200 sm:px-8"},et={class:"flex-1"},st=t("h3",{class:"text-base font-semibold leading-6 text-gray-900"},"Orders",-1),at={class:"mt-1 text-sm text-gray-500"},rt=t("div",{class:"flex-shrink-0 flex space-x-3"},null,-1),ot=["onSubmit"],lt={class:"px-5 py-5 mx-auto max-w-5xl"},it={class:"py-2 sm:grid sm:grid-cols-8 sm:gap-4"},dt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},nt=t("label",{class:"block text-sm font-medium text-gray-700"},"Manager",-1),mt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},ct=t("label",{class:"block text-sm font-medium text-gray-700"},"Waiter",-1),ut={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},xt=t("label",{class:"block text-sm font-medium text-gray-700"},"Customer",-1),pt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},bt=t("label",{class:"block text-sm font-medium text-gray-700"},"Payment Method",-1),gt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},ft=t("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1),_t={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},ht=t("label",{class:"block text-sm font-medium text-gray-700"},"End Date",-1),yt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},wt=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1),vt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},kt=t("label",{class:"block text-sm font-medium text-gray-700"},"Action",-1),Vt={class:"flex w-full mt-1 rounded shadow-sm",role:"group"},$t={type:"submit",class:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-l text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-600"},jt=["data-url"],At=t("thead",null,[t("tr",null,[t("th",{class:"w-3 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-left"},"S.N."),t("th",{class:"w-10 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-left"},"Date"),t("th",{class:"w-10 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-left"},"Waiter"),t("th",{class:"w-12 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-left"},"Number"),t("th",{class:"w-12 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-left"},"Des"),t("th",{class:"w-12 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-right"},"Discount"),t("th",{class:"w-12 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-right"},"Type"),t("th",{class:"w-8 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-right"},"VAT"),t("th",{class:"w-8 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-right"},"Total"),t("th",{class:"w-20 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-right"},"Action")])],-1),St=t("tbody",{class:"bg-white"},null,-1),Ct=[At,St],Dt={class:"bg-white rounded-xl shadow-2xl w-11/12 max-w-lg max-h-[80vh] p-6 relative overflow-hidden"},Ot=t("h2",{class:"text-xl font-bold text-gray-800 mb-4 border-b pb-2"},"Products List",-1),Pt={class:"overflow-y-auto max-h-[60vh] pr-2 custom-scrollbar"},Tt={class:"list-disc list-inside space-y-1 text-gray-700 text-sm"},Bt={class:"mt-5 flex justify-end"},oe={__name:"Index",props:{filter:Object,managers:Array,waiters:Array,customers:Array,statuses:Array,payment_methods:Array},setup(i){const n=i,a=T(n.filter),C=[{name:"Orders",href:route("order.index"),current:!1},{name:"List Page",href:"#",current:!1}],m=f(!1),g=f([]);window.showProductPopup=d=>{g.value=d.split(",").map(e=>e.trim()),m.value=!0};const D=()=>{Object.keys(a).forEach(d=>a[d]="")},O=()=>{q.visit(route("order.index"),{data:a})},P=()=>{$("#ajax_table").DataTable({responsive:!0,serverSide:!0,processing:!0,destroy:!0,lengthMenu:[[10,25,50,100,200],[10,25,50,100,200]],ajax:{url:$("#ajax_table").data("url"),type:"GET",data:a},createdRow:(e,s)=>{s.is_complete?$(e).addClass("text-gray-700"):$(e).addClass("text-red-700")},order:[[1,"desc"]],columns:[{data:null,render:(e,s,c,r)=>r.row+r.settings._iDisplayStart+1},{data:"datetime_format"},{data:"waiter_name"},{data:"branch_invoice"},{data:"detail",sortable:!1,render:(e,s,c)=>`<span onclick="showProductPopup('${c.product_titles||""}')" class="cursor-pointer text-primary-600 underline decoration-dotted">${e}</span>`},{data:"discount_amount",class:"text-right"},{data:"discount_type",class:"text-right"},{data:"vat_amount",class:"text-right"},{data:"total",class:"text-right"},{data:"actions",orderable:!1,searchable:!1,render:e=>`<div class="vue-actions" data-actions='${JSON.stringify(e).replace(/'/g,"&apos;")}'></div>`}]}).on("draw",()=>{document.querySelectorAll(".vue-actions").forEach(e=>{if(e.dataset.vueMounted)return;const s=JSON.parse(e.dataset.actions);N({props:["actions"],components:{ArrowTopRightOnSquareIcon:V,PrinterIcon:j,PencilSquareIcon:A,TrashIcon:S},setup(r){return()=>l("div",{class:"flex justify-end space-x-2"},[r.actions.print_url&&l("a",{href:r.actions.print_url,target:"_blank",class:"text-green-600 hover:text-green-800"},[l(j,{class:"w-6 h-6"})]),r.actions.show_url&&l("a",{href:r.actions.show_url,target:"_blank",class:"text-primary-600 hover:text-primary-800"},[l(V,{class:"w-6 h-6"})]),r.actions.edit_url&&l("a",{href:r.actions.edit_url,class:"text-indigo-600 hover:text-indigo-800"},[l(A,{class:"w-6 h-6"})]),r.actions.delete_id&&l("button",{class:"text-red-600 hover:text-red-800",onClick:()=>window.deleteRecord(r.actions.delete_id)},[l(S,{class:"w-6 h-6"})])].filter(Boolean))}},{actions:s}).mount(e),e.dataset.vueMounted="true"})})};return B(()=>{P()}),(d,e)=>(x(),p(_,null,[o(b(U),{title:"Orders"}),o(J,null,{default:M(()=>[t("div",null,[t("div",z,[t("div",G,[t("div",X,[t("div",Z,[o(F,{breadcrumbs:C})]),H])])]),t("div",K,[t("div",Q,[t("div",Y,[t("div",tt,[t("div",et,[st,t("p",at,h((n.filter.start_date?n.filter.start_date.split("-").reverse().join("/"):"")+" - "+(n.filter.end_date?n.filter.end_date.split("-").reverse().join("/"):"")),1)]),rt]),o(L),t("form",{onSubmit:y(O,["prevent"])},[t("dl",lt,[t("div",it,[t("dd",dt,[nt,o(u,{class:"mt-1",modelValue:a.manager_id,"onUpdate:modelValue":e[0]||(e[0]=s=>a.manager_id=s),items:i.managers},null,8,["modelValue","items"])]),t("dd",mt,[ct,o(u,{class:"mt-1",modelValue:a.waiter_id,"onUpdate:modelValue":e[1]||(e[1]=s=>a.waiter_id=s),items:i.waiters},null,8,["modelValue","items"])]),t("dd",ut,[xt,o(u,{class:"mt-1",modelValue:a.customer_id,"onUpdate:modelValue":e[2]||(e[2]=s=>a.customer_id=s),items:i.customers},null,8,["modelValue","items"])]),t("dd",pt,[bt,o(u,{class:"mt-1",modelValue:a.payment_method_id,"onUpdate:modelValue":e[3]||(e[3]=s=>a.payment_method_id=s),items:i.payment_methods},null,8,["modelValue","items"])]),t("dd",gt,[ft,w(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.start_date=s),type:"date",class:"mt-1 block w-full px-4 focus:ring-indigo-400 focus:border-indigo-400 hover:bg-gray-100 focus:bg-transparent sm:text-sm border-gray-300 rounded"},null,512),[[v,a.start_date]])]),t("dd",_t,[ht,w(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.end_date=s),type:"date",class:"mt-1 block w-full px-4 focus:ring-indigo-400 focus:border-indigo-400 hover:bg-gray-100 focus:bg-transparent sm:text-sm border-gray-300 rounded"},null,512),[[v,a.end_date]])]),t("dd",yt,[wt,o(u,{class:"mt-1",modelValue:a.status,"onUpdate:modelValue":e[6]||(e[6]=s=>a.status=s),items:i.statuses},null,8,["modelValue","items"])]),t("dd",vt,[kt,t("div",Vt,[t("button",$t,[o(b(R),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),k(" Search ")]),t("button",{onClick:D,class:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-primary-600 rounded-r text-sm font-medium text-primary-700 bg-white hover:bg-primary-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-600"},[o(b(W),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),k(" Clear ")])])])])])],40,ot),t("table",{class:"table-auto sm:table-fixed min-w-full w-full",id:"ajax_table","data-url":d.route("order.load")},Ct,8,jt)])])])]),m.value?(x(),p("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[9]||(e[9]=y(s=>m.value=!1,["self"]))},[t("div",Dt,[t("button",{onClick:e[7]||(e[7]=s=>m.value=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 transition"},"✕"),Ot,t("div",Pt,[t("ul",Tt,[(x(!0),p(_,null,E(g.value,(s,c)=>(x(),p("li",{key:c},h(s),1))),128))])]),t("div",Bt,[t("button",{onClick:e[8]||(e[8]=s=>m.value=!1),class:"px-4 py-2 rounded-lg bg-primary-600 text-white text-sm font-medium hover:bg-primary-700 transition"},"Close")])])])):I("",!0)]),_:1})],64))}};export{oe as default};
