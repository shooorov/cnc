import{K as V,T as U,E as $,o as p,f,a,w as _,u as o,F as v,Z as C,b as e,j as D,d as u,e as T,i as d,x as c,t as y,g as j,r as S,p as A}from"./app-d8addb62.js";import{_ as K}from"./AuthenticatedLayout-3ec56e36.js";import{B as N}from"./Breadcrumb-38397fa2.js";import{_ as R}from"./Alert-0f2bdacd.js";import{_ as B}from"./Combobox-59b2c747.js";import{_ as g}from"./InputError-9c75c50b.js";import{_ as F}from"./Listbox-80292c9f.js";import{r as h}from"./PlusIcon-55e56ee8.js";import{r as E}from"./XMarkIcon-a55f7771.js";import"./_commonjsHelpers-de833af9.js";import"./transition-d6b1d06f.js";import"./use-outside-click-e0d988a6.js";import"./hidden-68b779fe.js";import"./menu-9433506f.js";import"./use-text-value-78c7b3f7.js";import"./ShoppingBagIcon-2330124a.js";import"./XMarkIcon-242f9d72.js";import"./ChevronDownIcon-5b7a3277.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-controllable-fafe7119.js";import"./ChevronUpDownIcon-5c740879.js";const L=e("title",null,"Create Kitchen Delivery",-1),M={class:"bg-white shadow"},Q={class:"px-4 sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8"},I={class:"py-6 md:flex md:items-center md:justify-between lg:border-t lg:border-gray-200"},O={class:"flex-1 min-w-0"},P={class:"mt-6 h-9 flex space-x-3 md:mt-0 md:ml-4"},Z={class:"py-5"},z={class:"max-w-6xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white shadow sm:rounded-lg"},H={class:"flex flex-col sm:flex-row sm:justify-between items-center px-4 py-5 border-b border-gray-200 sm:px-8"},J=e("p",{class:"max-w-2xl leading-10 text-gray-700 text-lg font-medium mb-4 sm:mb-0"},"Kitchen Delivery Create",-1),W={class:"flex-shrink-0 flex space-x-3"},X=["onSubmit"],Y={class:"space-y-4 sm:space-y-6 px-5 py-6"},ee={class:"max-w-xl mx-auto"},te={class:"grid grid-cols-6 gap-6"},se={class:"col-span-6 sm:col-span-3"},oe=e("label",{class:"block text-sm font-medium text-gray-700"},[u(" Requisition Date "),e("span",{class:"text-red-500"},"*")],-1),re={class:"col-span-6 sm:col-span-3"},ie=e("label",{class:"block text-sm font-medium text-gray-700"},[u(" Total Around "),e("span",{class:"text-red-500"},"*")],-1),ae=["value"],le={class:"col-span-6 sm:col-span-3"},ne=e("label",{class:"block text-sm font-medium text-gray-700"},[u(" Delivery From Central Kitchen "),e("span",{class:"text-red-500"},"*")],-1),de={class:"col-span-6 sm:col-span-6"},ce={class:"block text-sm font-medium text-gray-700"},ue=e("span",{class:"text-red-500"},"*",-1),me={class:"flex mx-auto"},pe=e("span",{class:"sr-only"},"Dismiss",-1),fe=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center ml-4"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"}," Kitchen Delivery Items ")])],-1),ge={class:"max-w-5xl mx-auto space-y-4 sm:space-y-6"},_e={class:"table-auto sm:table-fixed min-w-full divide-y divide-gray-200"},ye={class:"bg-gray-50"},he={scope:"col",class:"py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},xe=e("th",{scope:"col",class:"w-28 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Requisition Quantity ",-1),be=e("th",{scope:"col",class:"w-28 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Delivery Quantity ",-1),ve=e("th",{scope:"col",class:"w-28 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Unit",-1),we=e("th",{scope:"col",class:"w-28 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Avg Rate",-1),ke=e("th",{scope:"col",class:"w-28 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Requisition Total ",-1),qe=e("th",{scope:"col",class:"w-28 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Delivery Total ",-1),Ve={class:"bg-white divide-y divide-gray-200"},Ue=["onUpdate:modelValue"],$e=["onUpdate:modelValue"],Ce=["onUpdate:modelValue","onKeyup"],De=["onUpdate:modelValue"],Te=["onUpdate:modelValue"],je=["onUpdate:modelValue"],Se=["onUpdate:modelValue"],Ae={class:"bg-white"},Ke=e("th",{colspan:"4",scope:"col",class:"py-2 text-right text-lg font-medium font-mono"},"Total Around",-1),Ne={colspan:"1",scope:"col",class:"py-2 text-center text-lg font-medium font-mono"},Re=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center ml-4"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"})])],-1),Be={class:"max-w-5xl mx-auto space-y-4 sm:space-y-6"},Fe={class:"flex justify-start"},Ee={type:"submit",class:"mr-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},lt={__name:"Create",props:{string_change:Object,date:String,items:Array,requisition_items:Array,requisitions:Array,central_kitchens:Array},setup(m){const x=m,w=V(),l=U({branch_id:null,requisition_id:null,central_kitchen_id:null,delivery_date:x.date,total:null,group_items:x.items.map(i=>(i.show=!0,i.unit="pcs",i.avg_rate=i.rate,i))}),b=()=>{w.props.alertMessage={},l.post(route("kitchen_delivery.store"))};$(()=>l.requisition_id,(i,r)=>{console.log(i,this.items),this.form.group_items=this.items.map(t=>{var n;return(n=this.requisition_items[this.form.requisition_id])==null||n.forEach(s=>{s.item_id==t.id&&(t.requisition_quantity=s.quantity)}),t.show=!0,t.unit="pcs",t.avg_rate=t.rate,t})});const k=i=>{let r=this.form.group_items[i];r.requisition_total=Number(((r.avg_rate||0)*(r.requisition_quantity||0)).toFixed(3)),r.delivery_total=Number(((r.avg_rate||0)*(r.delivery_quantity||0)).toFixed(3)),this.form.total=this.form.group_items.reduce((t,n)=>t+Number(n.delivery_total||0),0),this.form.total_format=this.form.total.toLocaleString("en-US"),this.form.requisition_total=this.form.group_items.reduce((t,n)=>t+Number(n.requisition_total||0),0).toLocaleString("en-US")},q=[{name:"Kitchen Deliveries",href:route("kitchen_delivery.index"),current:!1},{name:"Create Page",href:"#",current:!1}];return(i,r)=>(p(),f(v,null,[a(o(C),null,{default:_(()=>[L]),_:1}),a(K,null,{default:_(()=>[e("div",M,[e("div",Q,[e("div",I,[e("div",O,[a(N,{breadcrumbs:q})]),e("div",P,[a(o(D),{href:i.route("kitchen_delivery.create"),class:"inline-flex items-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white hover:bg-gray-50 text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-primary-400"},{default:_(()=>[a(o(h),{class:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),u(" Create ")]),_:1},8,["href"])])])])]),e("div",Z,[e("div",z,[e("div",G,[e("div",H,[J,e("div",W,[e("button",{onClick:b,class:"mr-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[a(o(h),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),u(" Create ")])])]),a(R),e("form",{onSubmit:T(b,["prevent"])},[e("dl",Y,[e("div",ee,[e("div",te,[e("div",se,[oe,d(e("input",{"onUpdate:modelValue":r[0]||(r[0]=t=>o(l).delivery_date=t),type:"date",class:"mt-1 block w-full px-4 focus:ring-indigo-400 focus:border-indigo-400 hover:bg-gray-100 focus:bg-transparent sm:text-sm border-gray-300 rounded"},null,512),[[c,o(l).delivery_date]]),a(g,{message:i.$page.props.errors.delivery_date},null,8,["message"])]),e("div",re,[ie,e("input",{value:o(l).total_format,type:"text",placeholder:"Total",readonly:"",class:"mt-1 block w-full px-4 focus:ring-none focus:ring-0 focus:ring-primary-400 focus:border-primary-400 bg-gray-100 sm:text-sm border-gray-300 rounded"},null,8,ae),a(g,{message:i.$page.props.errors.total},null,8,["message"])]),e("div",le,[ne,a(B,{class:"mt-1",modelValue:o(l).central_kitchen_id,"onUpdate:modelValue":r[1]||(r[1]=t=>o(l).central_kitchen_id=t),items:m.central_kitchens},null,8,["modelValue","items"]),a(g,{message:i.$page.props.errors.central_kitchen_id},null,8,["message"])]),e("div",de,[e("label",ce,[u(y(m.string_change.product)+" Requisition ",1),ue]),e("div",me,[a(F,{class:"",modelValue:o(l).requisition_id,"onUpdate:modelValue":r[2]||(r[2]=t=>o(l).requisition_id=t),items:m.requisitions},null,8,["modelValue","items"]),o(l).requisition_id?(p(),f("button",{key:0,onClick:r[3]||(r[3]=t=>o(l).requisition_id=null),type:"button",class:"my-0.5 ml-1 inline-flex rounded p-1.5 text-gray-500 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-1"},[pe,a(o(E),{class:"h-5 w-5","aria-hidden":"true"})])):j("",!0)]),a(g,{message:i.$page.props.errors.requisition_id},null,8,["message"])])])]),fe,e("div",ge,[e("table",_e,[e("thead",ye,[e("tr",null,[e("th",he,y(m.string_change.product),1),xe,be,ve,we,ke,qe])]),e("tbody",Ve,[(p(!0),f(v,null,S(o(l).group_items,(t,n)=>d((p(),f("tr",{key:n},[e("td",null,[d(e("input",{"onUpdate:modelValue":s=>t.name=s,readonly:"",type:"text",autocomplete:"off",class:"block w-full px-4 focus:ring-none focus:ring-0 focus:ring-primary-400 focus:border-primary-400 bg-gray-100 sm:text-sm border-gray-300 rounded"},null,8,Ue),[[c,t.name]])]),e("td",null,[d(e("input",{"onUpdate:modelValue":s=>t.requisition_quantity=s,readonly:"",type:"text",autocomplete:"off",class:"block w-full px-4 focus:ring-none focus:ring-0 focus:ring-primary-400 focus:border-primary-400 bg-gray-100 sm:text-sm border-gray-300 rounded"},null,8,$e),[[c,t.requisition_quantity]])]),e("td",null,[d(e("input",{"onUpdate:modelValue":s=>t.delivery_quantity=s,onKeyup:s=>k(n),placeholder:"Quantity",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",class:"block w-full px-4 focus:ring-indigo-400 focus:border-indigo-400 hover:bg-gray-100 focus:bg-transparent sm:text-sm border-gray-300 rounded"},null,40,Ce),[[c,t.delivery_quantity]])]),e("td",null,[d(e("input",{"onUpdate:modelValue":s=>t.unit=s,readonly:"",type:"text",autocomplete:"off",class:"block w-full px-4 focus:ring-none focus:ring-0 focus:ring-primary-400 focus:border-primary-400 bg-gray-100 sm:text-sm border-gray-300 rounded"},null,8,De),[[c,t.unit]])]),e("td",null,[d(e("input",{"onUpdate:modelValue":s=>t.avg_rate=s,placeholder:"Avg Rate",readonly:"",type:"text",autocomplete:"off",class:"block w-full px-4 focus:ring-none focus:ring-0 focus:ring-primary-400 focus:border-primary-400 bg-gray-100 sm:text-sm border-gray-300 rounded"},null,8,Te),[[c,t.avg_rate]])]),e("td",null,[d(e("input",{"onUpdate:modelValue":s=>t.requisition_total=s,placeholder:"Total",readonly:"",type:"text",autocomplete:"off",class:"block w-full px-4 focus:ring-none focus:ring-0 focus:ring-primary-400 focus:border-primary-400 bg-gray-100 sm:text-sm border-gray-300 rounded"},null,8,je),[[c,t.requisition_total]])]),e("td",null,[d(e("input",{"onUpdate:modelValue":s=>t.delivery_total=s,placeholder:"Total",readonly:"",type:"text",autocomplete:"off",class:"block w-full px-4 focus:ring-none focus:ring-0 focus:ring-primary-400 focus:border-primary-400 bg-gray-100 sm:text-sm border-gray-300 rounded"},null,8,Se),[[c,t.delivery_total]])])])),[[A,t.show]])),128))]),e("tfoot",Ae,[e("tr",null,[Ke,e("th",Ne,y(o(l).total_format),1)])])])]),Re,e("div",Be,[e("div",Fe,[e("button",Ee,[a(o(h),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),u(" Create ")])])])])],40,X)])])])]),_:1})],64))}};export{lt as default};
