import{o as n,f as a,b as e,K as at,A as v,h as g,q as Re,T as rt,a4 as dt,k as ct,a as r,u as s,t as c,F as C,r as U,w as f,n as d,i as h,x as w,_ as ut,d as b,g as _,e as Ee,c as S,p as oe,Y as pt,O as mt,Z as ft,m as Ge,j as F,D as xt,v as ht,$ as vt,y as _t}from"./app-43394236.js";import{_ as yt,r as le}from"./Notification-4e8b8edc.js";import{_ as gt}from"./Receipt-9221911c.js";import{_ as K}from"./Listbox-93365c37.js";import{u as bt,a as wt,r as kt,b as Ct,c as $t,d as Vt,e as Nt,f as We}from"./order-setting-f524905e.js";import{r as zt,a as Ut,U as He,h as E,G as Ye,S as Ze,b as St,V as jt}from"./transition-a46c0b1d.js";import{r as At,R as Mt,h as Tt,y as Ot,M as It}from"./menu-d79329d0.js";import{r as Pt,a as qt}from"./ShoppingBagIcon-d763d535.js";import{r as Bt,a as Dt}from"./Bars3BottomLeftIcon-ceadc191.js";import{r as ie}from"./XMarkIcon-ae32771d.js";import{r as Ft}from"./MagnifyingGlassIcon-60946dd0.js";import{r as Kt}from"./TrashIcon-0f8d4aa3.js";import{r as Lt}from"./PrinterIcon-bfbe258d.js";import"./_commonjsHelpers-de833af9.js";import"./XMarkIcon-bc558b0c.js";import"./ChevronUpDownIcon-5cd8b824.js";import"./use-outside-click-e0c0d3b1.js";import"./use-text-value-ed13f69d.js";import"./hidden-2febf338.js";import"./use-controllable-bc8024f1.js";function Rt(k,p){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM12.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM18.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})])}const Et={class:"flex h-screen print:hidden"},Gt={class:"hidden w-28 overflow-y-auto bg-primary-700 lg:block"},Wt={class:"flex w-full h-full flex-col items-center py-6"},Ht={href:"/",class:"flex flex-shrink-0 items-center"},Yt=["src"],Zt={key:1,class:"text-secondary-500 px-3 text-xl font-fancy leading-6 font-medium"},Jt={class:"mt-6 w-full flex-1 space-y-1 px-2"},Qt={class:"mt-2"},Xt={class:"pb-5 w-full flex flex-col space-y-1 px-2"},es=e("span",{class:"mt-2 flex items-center"},"Logout",-1),ts=["src"],ss={class:"sr-only"},os=e("p",null,"Account settings",-1),ls=e("div",{class:"fixed inset-0 bg-stone-600 bg-opacity-75"},null,-1),is={class:"fixed inset-0 z-40 flex"},ns={class:"absolute top-1 right-0 -mr-14 p-1"},as=e("span",{class:"sr-only"},"Close sidebar",-1),rs={class:"flex flex-shrink-0 items-center px-4"},ds=["src"],cs={key:1,class:"text-secondary-500 px-3 text-xl font-fancy leading-6 font-medium"},us={class:"mt-5 h-0 flex-1 overflow-y-auto px-2"},ps={class:"flex h-full flex-col"},ms={class:"space-y-1"},fs=["href","aria-current"],xs=e("div",{class:"w-14 flex-shrink-0","aria-hidden":"true"},null,-1),hs={class:"flex flex-1 flex-col overflow-hidden"},vs={class:"min-w-md flex flex-1 items-stretch overflow-hidden"},_s={class:"flex-1 overflow-y-auto"},ys={"aria-labelledby":"primary-heading",class:"flex h-full min-w-0 flex-1 flex-col lg:order-last"},gs=e("h1",{id:"primary-heading",class:"sr-only"},"Products",-1),bs={class:"flex flex-col relative w-full h-full divide-y divide-stone-200"},ws={class:"flex-1 flex w-full shrink-0 bg-white space-y-2 overflow-y-auto"},ks={class:"flex-1 flex flex-col lg:flex-row divide-x divide-stone-200 w-full"},Cs={class:"hidden xl:block shrink-0 w-full xl:w-56 relative z-0 focus:outline-none h-full overflow-y-auto"},$s={class:"flex-1 min-h-0","aria-label":"Directory"},Vs={class:"relative"},Ns={role:"list",class:"flex flex-col relative z-0 divide-y divide-stone-200 overflow-y-auto border-b"},zs=["onClick"],Us={class:"flex-1 min-w-0"},Ss={type:"button",class:"focus:outline-none"},js=e("span",{class:"absolute inset-0","aria-hidden":"true"},null,-1),As={class:"px-4 whitespace-nowrap text-sm leading-4 font-medium capitalize"},Ms={class:"flex-1 flex flex-col relative z-0 divide-y divide-stone-200 overflow-hidden focus:outline-none"},Ts={class:"w-full"},Os={class:"relative z-10 flex h-12 flex-shrink-0 bg-white shadow-sm"},Is=e("span",{class:"sr-only"},"Open sidebar",-1),Ps={class:"flex flex-1 justify-between px-4 sm:px-6"},qs={class:"flex flex-1"},Bs={class:"flex w-full lg:ml-0",action:"#",method:"GET"},Ds=e("label",{for:"search-field",class:"sr-only"},"Search all files",-1),Fs={class:"relative w-full text-stone-400 focus-within:text-stone-600"},Ks={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center"},Ls={class:"relative z-10 bg-white shadow-sm overflow-y-auto"},Rs={class:"px-3 overflow-hidden"},Es={role:"list",class:"relative w-full max-h-40 flex gap-2.5 sm:flex-wrap z-0 overflow-x-auto sm:overflow-y-auto px-1 py-3"},Gs={class:"whitespace-nowrap"},Ws={class:"flex-1 min-w-0 flex justify-center items-center"},Hs={class:"flex-1 min-w-0 flex justify-center items-center"},Ys={class:"xl:hidden shrink-0 w-full relative z-0 focus:outline-none"},Zs={class:"flex-1 min-h-0","aria-label":"Directory"},Js={class:"relative"},Qs={role:"list",class:"flex relative z-0 overflow-x-auto"},Xs=["onClick"],eo={class:"flex-1 min-w-0"},to={type:"button",class:"focus:outline-none"},so=e("span",{class:"absolute inset-0","aria-hidden":"true"},null,-1),oo={class:"px-2 whitespace-nowrap text-sm leading-4 font-medium capitalize"},lo={class:"flex-1 h-full overflow-y-auto py-2"},io=e("h2",{class:"sr-only"},"All Products",-1),no={class:"absolute bottom-0 flex justify-center gap-2 z-10 mb-6 w-full text-center"},ao={class:"isolate inline-flex rounded-md shadow-lg shadow-indigo-500/40"},ro={key:0},co=_t('<div class="h-64 flex justify-center items-center"><div class="inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-gray-600 transition ease-in-out duration-150"><svg class="animate-spin -ml-1 mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Processing... </div></div>',1),uo=[co],po={key:1,class:"w-full"},mo={key:0,class:"w-full transition-all"},fo=["onClick","title"],xo={class:"w-28 text-right text-stone-700"},ho={class:"px-3 font-normal text-sm tracking-wider"},vo=e("span",{class:"tracking-tighter text-xs"},"TK",-1),_o={key:1,class:"mt-2 px-4 grid grid-cols-1 gap-4 md:grid-cols-2 2xl:grid-cols-3 transition-all"},yo=["onClick"],go={class:"flex-1 flex flex-col"},bo=["title"],wo={class:"mt-2 text-sm tracking-widest text-stone-600 pointer-events-none flex justify-between"},ko={class:"px-0 font-normal text-sm tracking-wider"},Co=e("span",{class:"tracking-tighter text-xs"},"TK",-1),$o=["title"],Vo={key:2,role:"list",class:"px-4 py-2 grid gap-4 grid-cols-1 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 transition-all"},No=["onClick"],zo=["title"],Uo={class:"flex items-center justify-between mt-2 text-sm tracking-wide text-stone-600 pointer-events-none"},So={class:"px-0 font-normal text-sm tracking-wider"},jo=e("span",{class:"tracking-tighter text-xs"},"TK",-1),Ao={key:2,class:"rounded-md p-4"},Mo={class:"h-20 flex justify-center items-center"},To={class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm text-red-600 transition ease-in-out duration-150"},Oo={class:"w-1/2 sm:w-96 overflow-y-auto border-l border-gray-200 bg-white px-0 block"},Io=["onSubmit"],Po={class:"flex w-full shrink-0 h-12 bg-white shadow-sm"},qo={class:"flex justify-center items-center w-full px-4"},Bo={class:"flex-1 py-2 hidden sm:flex sm:justify-between sm:items-center"},Do={class:"flex items-center gap-x-2"},Fo=e("h3",{class:""},"Cart Items",-1),Ko={class:"relative text-gray-400 focus-within:text-gray-600"},Lo={class:"ml-2 text-gray-700 text-sm font-medium lg:block"},Ro=e("span",{class:"sr-only"},"Open user menu for ",-1),Eo={class:"text-sm leading-5 font-semibold capitalize"},Go={class:"flex justify-center items-center"},Wo={class:"inline-flex text-sm font-normal leading-5 text-stone-600 text-right sm:text-left"},Ho={class:"ml-auto flex items-center rounded-md space-x-2"},Yo=["onClick"],Zo=["onUpdate:modelValue"],Jo=["onClick"],Qo={class:"inline-block min-w-full align-middle"},Xo={class:"bg-white divide-y divide-stone-200"},el={class:"px-3 grid grid-cols-3 gap-1 text-xs"},tl={class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},sl={class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},ol={class:"py-2 whitespace-nowrap sm:text-lg text-stone-500 text-right"},ll={class:""},il={key:0,class:"px-3 grid grid-cols-3 gap-1 text-xs"},nl=e("div",{class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},"Member Code ",-1),al={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left col-span-2"},rl={class:"relative"},dl={class:"absolute py-1.5 px-2 sm:py-2 top-0 right-0 m-px sm:px-2 rounded-r-md border-l border-stone-300 bg-stone-100"},cl={key:1,class:"px-3 grid grid-cols-3 gap-1 text-xs"},ul=e("div",{class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},"Discount ",-1),pl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},ml={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},fl=["placeholder"],xl={key:2,class:"px-3 grid grid-cols-3 gap-1 text-xs"},hl=e("div",{class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},"Amount",-1),vl={class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},_l={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},yl={key:3,class:"px-3 grid grid-cols-3 gap-1 text-xs"},gl=e("div",{class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},"Service Cost ",-1),bl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left col-span-2"},wl={key:4,class:"px-3 grid grid-cols-3 gap-1 text-xs"},kl={class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},Cl={class:"text-left"},$l={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},Vl={class:"py-2 whitespace-nowrap text-2xl/7 font-bold text-stone-800 text-right"},Nl={key:5,class:"px-3 grid grid-cols-3 gap-1 text-xs"},zl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left col-span-2"},Ul={class:"py-2 whitespace-nowrap sm:text-lg text-stone-500 text-left"},Sl={class:"px-3 grid grid-cols-3 gap-1 text-xs"},jl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left col-span-2"},Al={class:"relative"},Ml=e("span",{class:"absolute py-1.5 px-2 sm:py-2 top-0 left-0 m-px sm:px-2 rounded-l-md border-r border-stone-300 bg-stone-100"}," +88 ",-1),Tl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},Ol={class:"px-3 grid grid-cols-3 gap-1 text-xs"},Il={class:"py-1 whitespace-nowrap sm:text-lg text-stone-500 text-left col-span-3"},Pl={key:6,class:"px-3 grid grid-cols-3 gap-1 text-xs"},ql=e("div",{class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},"Served By ",-1),Bl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left col-span-2"},Dl={class:"px-3 grid grid-cols-3 gap-1 text-xs"},Fl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},Kl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},Ll=["required"],Rl={class:"py-1 whitespace-nowrap sm:text-lg text-stone-500 text-left"},El={class:"px-3 grid grid-cols-3 gap-1 text-xs"},Gl={class:"py-1 whitespace-nowrap sm:text-lg text-stone-500 text-left col-span-3"},Wl={key:7,class:"px-3 grid grid-cols-3 gap-1 text-xs"},Hl={class:"py-1 whitespace-nowrap sm:text-lg text-stone-500 text-left col-span-3"},Yl={key:8,class:"px-3 grid grid-cols-3 gap-1 text-xs"},Zl=e("div",{class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},"Rider",-1),Jl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},Ql={class:"py-1 whitespace-nowrap sm:text-lg text-stone-500 text-left"},Xl={class:"h-14 py-2 px-4"},ei={class:"flex items-center justify-between"},ti={class:"flex-shrink-0 flex space-x-3"},si=["disabled"],oi={key:0},li={key:1},ii=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),ni={class:"fixed inset-0 z-10 overflow-y-auto"},ai={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},ri={class:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block"},di=e("span",{class:"sr-only"},"Close",-1),ci={class:"sm:flex sm:items-start"},ui={class:"w-full mt-3 text-center sm:mt-0 sm:text-left"},pi={key:0,class:"mt-2"},mi={class:"mt-6 flex flex-col sm:mt-1"},fi={class:"text-sm text-gray-500"},xi={class:"flex flex-start"},hi=e("div",{class:"w-1/3 text-sm font-normal"},"Customer Name",-1),vi={class:"w-2/3 font-medium text-gray-700"},_i={class:"flex flex-start"},yi=e("div",{class:"w-1/3 text-sm font-normal"},"Customer Mobile",-1),gi={class:"w-2/3 font-medium text-gray-700"},bi={key:0,class:"flex flex-start"},wi=e("div",{class:"w-1/3 text-sm font-normal"},"Available Token",-1),ki={class:"w-2/3 font-medium text-gray-700"},Ci={class:"flex items-center"},$i=e("span",{class:"uppercase text-gray-500 ml-1"},"token",-1),Vi=e("span",{class:"uppercase text-gray-500 ml-1"},"bdt",-1),Ni={class:"mt-4 min-w-full divide-y divide-gray-300"},zi={class:"divide-y divide-gray-200 bg-white"},Ui=e("th",{scope:"col",class:"w-1/2 whitespace-nowrap py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"}," Total Amount ",-1),Si={scope:"col",class:"whitespace-nowrap px-2 py-0.5 text-left text-sm font-medium text-gray-900"},ji={key:0},Ai={scope:"col",class:"w-1/2 whitespace-nowrap py-2 pl-4 pr-3 text-left text-sm text-gray-500 sm:pl-0"},Mi={class:"flex justify-between"},Ti={scope:"col",class:"whitespace-nowrap px-2 py-1 text-left text-sm text-gray-900"},Oi={key:0,class:"flex items-center font-normal text-gray-700"},Ii=e("span",{class:"uppercase text-gray-500 ml-1"},"token",-1),Pi=e("span",{class:"uppercase text-gray-500 ml-1"},"bdt",-1),qi={class:"divide-y divide-gray-200 bg-white"},Bi={class:"whitespace-nowrap py-2 pl-4 pr-3 text-sm sm:pl-0"},Di={class:"whitespace-nowrap px-2 py-1 text-sm text-gray-500"},Fi=["onUpdate:modelValue"],Ki={key:0,class:"hidden print:block"},cn={__name:"POS2",props:{vat_rate:Number,tables:Array,waiters:Array,pending_orders:Array,order:Object,dineTypes:Object,discountTypes:Object,statuses:Object},setup(k){var ye,ge,be,we,ke,Ce,$e,Ve,Ne,ze,Ue,Se,je,Ae,Me,Te,Oe,Ie,Pe,qe,Be,De,Fe,Ke,Le;const p=k,m=at(),G=v(!1),L=v(!1),J=v(!1),T=v(null),W=v(m.props.branch),ne=v(Number(m.props.setting.token_value??1)),$=v(m.props.auth.user.is_waiter),ae=v($.value?m.props.auth.user.id:null),Q=g(()=>{var i;return(i=p.order)==null?void 0:i.id}),V=v(null),P=v([]),re=v([]),de=v([]),ce=v([]),X=v([]),ue=v([]),H=v(0),N=Re({}),Y=v({}),j=v(null),A=bt(),M=wt(),l=rt({order_id:((ye=p.order)==null?void 0:ye.id)??"",date:(ge=p.order)==null?void 0:ge.date,date_time:(be=p.order)==null?void 0:be.datetime_raw,number:(we=p.order)==null?void 0:we.number,dine_type:((ke=p.order)==null?void 0:ke.dine_type)??"dine-in",guest_number:(Ce=p.order)==null?void 0:Ce.guest_number,discount_type:(($e=p.order)==null?void 0:$e.discount_type)??"percent",discount_rate:((Ve=p.order)==null?void 0:Ve.discount_rate)??0,vat_rate:((Ne=p.order)==null?void 0:Ne.vat_rate)??p.vat_rate??0,service_cost:((ze=p.order)==null?void 0:ze.service_cost)??W.value.service_cost,waiter_id:((Ue=p.order)==null?void 0:Ue.waiter_id)??ae.value,customer_id:((Se=p.order)==null?void 0:Se.customer_id)??"",customer_name:(Ae=(je=p.order)==null?void 0:je.customer)==null?void 0:Ae.name,customer_mobile:(Te=(Me=p.order)==null?void 0:Me.customer)==null?void 0:Te.mobile,token_use:Number((Oe=p.order)==null?void 0:Oe.token)>0,note:(Ie=p.order)==null?void 0:Ie.note,table:(Pe=p.order)==null?void 0:Pe.stuff_id,status:((qe=p.order)==null?void 0:qe.status)??"accept",delivery_address:(De=(Be=p.order)==null?void 0:Be.order_delivery)==null?void 0:De.address,rider_id:(Ke=(Fe=p.order)==null?void 0:Fe.order_delivery)==null?void 0:Ke.rider_id,group_items:((Le=p.order)==null?void 0:Le.products)??[],order_id:null,sub_total:null,discount_amount:null,vatable_amount:null,vat_amount:null,total:null,token:null,cash:null,change:null,group_methods:null}),q=g(()=>Number(l.group_items.reduce((i,o)=>i+Number(o.rate)*Number(o.quantity),0)).toFixed(2)),B=g(()=>Number(l.discount_type=="percent"?q.value*(Number(l.discount_rate)/100):Number(l.discount_rate)).toFixed(2)),ee=g(()=>Number(l.group_items.filter(i=>!i.vat_applicable).reduce((i,o)=>i+Number(o.rate)*Number(o.quantity),0))),Je=g(()=>Number(ee.value>0?ee.value/q.value*B.value:0)),pe=g(()=>Number(q.value-B.value-ee.value+Je.value)),Z=g(()=>Number(pe.value*(Number(l.vat_rate)/100)).toFixed(2)),O=g(()=>Math.round(q.value-B.value+Z.value+Number(l.service_cost))),me=g(()=>Number(se.value.reduce((i,o)=>i+Number(o.amount),0)).toFixed(2)),fe=g(()=>O.value-me.value),xe=g(()=>l.token_use&&fe.value>0&&fe.value>H.value?H.value:0),I=g(()=>me.value+xe.value),te=g(()=>I.value-O.value),he=g(()=>te.value>=0?te.value:""),se=g(()=>ue.value.map(i=>{var o,x;return i.payment_method_id=i.id,i.amount=((x=(o=m.props.order)==null?void 0:o.methods.find(z=>z.payment_method_id==i.payment_method_id))==null?void 0:x.amount)??"",i})),D=g(()=>{console.log(j.value),j.value&&(V.value=null);let i=P.value.find(o=>o.code==j.value);return console.log(i,j.value),i?[i]:j.value?P.value.filter(o=>o.name.toLowerCase().includes(j.value.toLowerCase())):V.value=="top_sold"?P.value.filter(o=>re.value.includes(o.id)):P.value.filter(o=>!V.value||o.product_category_id==V.value)});dt(async()=>{M.isExpired&&(J.value=!0,await M.load(),J.value=!1),X.value=M.categories,ce.value=M.customers,ue.value=M.paymentMethods,P.value=M.products,de.value=M.riders,re.value=M.topProducts});const ve=()=>{var i,o;console.log("find customer"),T.value=ce.value.find(x=>x.mobile==l.customer_mobile),console.log(T.value),l.customer_name=(i=T.value)==null?void 0:i.name,H.value=Number((o=T.value)==null?void 0:o.balance)/ne.value};ct(()=>{ve(),Echo.channel(`pos.branches.${W.value.id}`).listen("OrderPlaced",i=>{let o=p.pending_orders.findIndex(x=>x.id==i.order.id);(!$.value||$.value&&i.order.waiter_id==ae.value)&&o<0&&p.pending_orders.unshift(i.order)}).listen("OrderModified",i=>{let o=p.pending_orders.findIndex(x=>x.id==i.order.id);i.order.status=="complete"&&o>=0?p.pending_orders.splice(o,1):i.order.status!="complete"&&o>=0?p.pending_orders[o]=i.order:i.order.status!="complete"&&o<0&&p.pending_orders.unshift(i.order)})});const R=i=>{let o=P.value.find(z=>z.id==i),x=l.group_items.find(z=>z.product_id==i);if(!o.rate){alert("Item price not set yet!");return}x?x.quantity++:o&&l.group_items.push({id:"",status:"pending",product_id:o.id,product_name:o.name,rate:o.rate,code:o.code,vat_applicable:o.vat_applicable,quantity:1})},Qe=i=>{let o=l.group_items.find(x=>x.product_id==i);o.quantity--},Xe=()=>{D.value.length==1&&j.value&&R(D.value[0].id)},et=()=>{Y.value.length>3?(l.discount_rate=0,pt.post(m.props.module.discount_url,{code:Y.value}).then(i=>{N.success=i.data.success,N.is_member=i.data.is_member,N.message=i.data.message,i.data.success&&(l.discount_rate=Number(i.data.discounts[m.props.module.discount_name]),N.message+=" & discount "+l.discount_rate+"%")})):(N.success=null,N.is_member=null,N.message=null)},tt=()=>{confirm("Are you sure you want to reset?")&&l.reset()},st=()=>{m.props.alertMessage={},l.post(route("pos2.printed"),{onFinish:()=>{window.print(),setTimeout(()=>{mt.visit(route("pos2.create"))},1e3)}})},ot=()=>{var i;l.order_id=(i=p.order)==null?void 0:i.id,l.sub_total=q.value,l.discount_amount=B.value,l.vatable_amount=pe.value,l.vat_amount=Z.value,l.total=O.value,l.token=xe.value,l.cash=I.value,l.change=he.value,l.group_methods=se.value,console.log(l),m.props.alertMessage={},l.post(route("pos2.store"),{onSuccess:o=>{var x,z,t,u,y;l.order_id=((x=o.props.order)==null?void 0:x.id)??"",l.date=(z=o.props.order)==null?void 0:z.date,l.date_time=(t=o.props.order)==null?void 0:t.datetime_raw,l.invoice_number=(u=o.props.order)==null?void 0:u.invoice_number,l.group_items=((y=o.props.order)==null?void 0:y.products)??[]},onFinish:()=>{$.value&&!l.order_id&&l.reset()}})},lt=i=>i.length<20?"text-xl/7":i.length<30?"text-lg/6":i.length<40?"text-base/5":"text-sm/4",it=i=>Re({backgroundColor:i.bg_color,color:i.text_color,fontSize:i.text_size,fontWeight:i.font_weight}),_e=[{name:"Dashboard",icon:zt,href:route("dashboard"),current:!1,visible:!$.value},{name:"POS",icon:At,href:route("pos2.create"),current:!0,visible:!0},{name:"Kitchen",icon:Pt,href:route("production.index"),current:!1,visible:m.props.module.production},{name:"Order Bill",icon:Ut,href:route("order.index"),current:!1,visible:!$.value}];return(i,o)=>{var x,z;return n(),a(C,null,[r(s(ft),{title:"POS"}),e("div",Et,[r(yt),e("div",Gt,[e("div",Wt,[e("a",Ht,[s(m).props.app.logo?(n(),a("img",{key:0,class:"h-16 w-auto",src:s(m).props.app.logo,alt:"logo"},null,8,Yt)):(n(),a("span",Zt,c(s(m).props.app.name),1))]),e("div",Jt,[(n(),a(C,null,U(_e,t=>h(r(s(F),{key:t.name,href:t.href,class:d([t.current?"bg-primary-800 text-white":"text-primary-100 hover:bg-primary-800 hover:text-white","group w-full p-3 rounded-md flex flex-col items-center text-xs font-medium"]),"aria-current":t.current?"page":void 0},{default:f(()=>[(n(),S(Ge(t.icon),{class:d([t.current?"text-white":"text-primary-300 group-hover:text-white","h-6 w-6"]),"aria-hidden":"true"},null,8,["class"])),e("span",Qt,c(t.name),1)]),_:2},1032,["href","class","aria-current"]),[[oe,t.visible]])),64))]),e("div",Xt,[r(s(F),{href:i.route("logout"),method:"post",as:"button",class:d(["text-primary-100 hover:bg-primary-800 hover:text-white","group w-full p-3 rounded-md flex flex-col items-center text-xs font-medium"])},{default:f(()=>[r(s(Bt),{class:"text-primary-300 group-hover:text-white h-6 w-6","aria-hidden":"true"}),es]),_:1},8,["href"]),r(s(F),{href:i.route("profile.index"),class:"w-full flex-shrink-0"},{default:f(()=>{var t,u;return[e("img",{class:"mx-auto block h-10 w-10 rounded-full",src:(t=s(m).props.auth.user)==null?void 0:t.image_url,alt:"Image"},null,8,ts),e("div",ss,[e("p",null,c((u=s(m).props.auth.user)==null?void 0:u.name),1),os])]}),_:1},8,["href"])])])]),r(s(Ze),{as:"template",show:G.value},{default:f(()=>[r(s(He),{as:"div",class:"relative z-20 lg:hidden",onClose:o[1]||(o[1]=t=>G.value=!1)},{default:f(()=>[r(s(E),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:f(()=>[ls]),_:1}),e("div",is,[r(s(E),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:f(()=>[r(s(Ye),{class:"relative flex w-full max-w-xs flex-1 flex-col bg-primary-700 pt-5 pb-4"},{default:f(()=>[r(s(E),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:f(()=>[e("div",ns,[e("button",{type:"button",class:"flex h-12 w-12 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-white",onClick:o[0]||(o[0]=t=>G.value=!1)},[r(s(ie),{class:"h-6 w-6 text-white","aria-hidden":"true"}),as])])]),_:1}),e("div",rs,[s(m).props.app.logo?(n(),a("img",{key:0,class:"h-16 w-auto",src:s(m).props.app.logo,alt:"logo"},null,8,ds)):(n(),a("span",cs,c(s(m).props.app.name),1))]),e("div",us,[e("nav",ps,[e("div",ms,[(n(),a(C,null,U(_e,t=>h(e("a",{key:t.name,href:t.href,class:d([t.current?"bg-primary-800 text-white":"text-primary-100 hover:bg-primary-800 hover:text-white","group py-2 px-3 rounded-md flex items-center text-sm font-medium"]),"aria-current":t.current?"page":void 0},[(n(),S(Ge(t.icon),{class:d([t.current?"text-white":"text-primary-300 group-hover:text-white","mr-3 h-6 w-6"]),"aria-hidden":"true"},null,8,["class"])),e("span",null,c(t.name),1)],10,fs),[[oe,t.visible]])),64))])])])]),_:1})]),_:1}),xs])]),_:1})]),_:1},8,["show"]),e("div",hs,[e("div",vs,[e("main",_s,[e("section",ys,[gs,e("div",bs,[e("div",ws,[e("section",ks,[e("div",Cs,[e("nav",$s,[e("div",Vs,[e("ul",Ns,[(n(!0),a(C,null,U(X.value,(t,u)=>(n(),a("li",{key:u,onClick:y=>V.value=V.value==t.id?null:t.id,class:d([V.value==t.id?"bg-indigo-500 text-white":"hover:bg-stone-100 text-stone-900","relative px-2 py-3 flex items-center h-12"])},[e("div",Us,[e("button",Ss,[js,e("p",As,c(t.name),1)])])],10,zs))),128))])])])]),e("div",Ms,[e("header",Ts,[e("div",Os,[e("button",{type:"button",class:"border-r border-stone-200 px-4 text-stone-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 lg:hidden",onClick:o[2]||(o[2]=t=>G.value=!0)},[Is,r(s(Dt),{class:"h-6 w-6","aria-hidden":"true"})]),e("div",Ps,[e("div",qs,[e("form",Bs,[Ds,e("div",Fs,[e("div",Ks,[r(s(Ft),{class:"h-5 w-5 flex-shrink-0","aria-hidden":"true"})]),h(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>j.value=t),onKeydown:o[4]||(o[4]=ut(Ee(t=>Xe(),["prevent"]),["enter"])),id:"search-field",class:"h-full w-full border-transparent py-2 pl-8 pr-3 text-base text-stone-900 placeholder-stone-500 focus:border-transparent focus:placeholder-stone-400 focus:outline-none focus:ring-0",placeholder:"Search",type:"search"},null,544),[[w,j.value]])])])])])])]),e("aside",null,[e("div",Ls,[e("div",Rs,[e("ul",Es,[e("li",Gs,[e("div",Ws,[r(s(F),{href:i.route("pos2.create"),title:"New",class:"inline-flex items-center gap-x-1.5 rounded-md bg-indigo-500 pl-2 pr-3 py-1.5 text-sm font-medium text-white shadow-sm hover:bg-indigo-600 border border-indigo-500"},{default:f(()=>[r(s(kt),{class:"-ml-0.5 h-5 w-5","aria-hidden":"true"}),b(" New ")]),_:1},8,["href"])])]),(n(!0),a(C,null,U(k.pending_orders,(t,u)=>{var y;return n(),a("li",{key:u,class:"whitespace-nowrap"},[e("div",Hs,[r(s(F),{href:i.route("pos2.create",t==null?void 0:t.id),title:t!=null&&t.is_printed?"Bill printed":"",class:d(["inline-flex items-center gap-x-1.5 rounded-md bg-indigo-50 px-2 py-1.5 text-sm font-medium text-indigo-600 shadow-sm hover:bg-indigo-100 border",(t==null?void 0:t.status)=="pending"?"bg-yellow-100 border-yellow-200 text-yellow-900 hover:bg-yellow-200":"border-indigo-200",((y=k.order)==null?void 0:y.id)==(t==null?void 0:t.id)?"ring-2 ring-secondary-500 ring-offset-2":""])},{default:f(()=>[t!=null&&t.is_deliverable?(n(),S(s(St),{key:0,class:"-ml-0.5 h-5 w-5","aria-hidden":"true"})):(n(),S(s(Ct),{key:1,class:"-ml-0.5 h-5 w-5","aria-hidden":"true"})),b(" "+c([t==null?void 0:t.invoice_number.substr(6),t==null?void 0:t.table_name].filter(nt=>nt).join(" - "))+" ",1),t!=null&&t.is_printed?(n(),S(s(le),{key:2,class:"-mr-0.5 h-5 w-5","aria-hidden":"true"})):_("",!0)]),_:2},1032,["href","title","class"])])])}),128))])])])]),e("div",Ys,[e("nav",Zs,[e("div",Js,[e("ul",Qs,[(n(!0),a(C,null,U(X.value,(t,u)=>(n(),a("li",{key:u,onClick:y=>V.value=V.value?null:t.id,class:d([V.value==t.id?"bg-indigo-500 text-white":"hover:bg-stone-100 text-stone-900","relative px-2 py-3 flex items-center"])},[e("div",eo,[e("button",to,[so,e("p",oo,c(t.name),1)])])],10,Xs))),128))])])])]),e("div",lo,[io,e("div",no,[e("div",ao,[e("button",{type:"button",onClick:o[5]||(o[5]=t=>s(A).set("table")),class:d([s(A).posLayout=="table"?"bg-indigo-600":"bg-indigo-500","rounded-l-md px-3.5 py-2 text-sm font-semibold text-white hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"])}," Table ",2),e("button",{type:"button",onClick:o[6]||(o[6]=t=>s(A).set("grid")),class:d([s(A).posLayout=="grid"?"bg-indigo-600":"bg-indigo-500","-ml-px rounded-none px-3.5 py-2 text-sm font-semibold text-white hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"])}," Card ",2),e("button",{type:"button",onClick:o[7]||(o[7]=t=>s(A).set("box")),class:d([s(A).posLayout=="box"?"bg-indigo-600":"bg-indigo-500","-ml-px rounded-r-md px-3.5 py-2 text-sm font-semibold text-white hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"])}," Box ",2)])]),J.value?(n(),a("div",ro,uo)):D.value.length>0?(n(),a("div",po,[s(A).posLayout=="table"?(n(),a("table",mo,[e("tbody",null,[(n(!0),a(C,null,U(D.value,(t,u)=>(n(),a("tr",{key:t.id,class:d([u%2==1?"bg-white":"bg-stone-100","hover:bg-primary-50"])},[e("td",null,[e("h3",{onClick:y=>{R(t.id)},class:d([t.rate?"text-stone-700 cursor-pointer":"text-red-700","flex items-start justify-start capitalize whitespace-wrap text-base font-fancy px-3 py-2"]),title:t.name},c(t.name),11,fo)]),e("td",xo,[e("span",ho,[vo,b(" "+c(t.rate),1)])])],2))),128))])])):s(A).posLayout=="grid"?(n(),a("div",_o,[(n(!0),a(C,null,U(D.value,t=>(n(),a("div",{key:t.id,class:"relative"},[e("div",{onClick:u=>{R(t.id)},class:d([t.current?"ring-2 ring-offset-2 ring-primary-500":"focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-stone-100 focus-within:ring-primary-500","flex gap-4 px-3 pl-5 py-3 group w-full border border-stone-200 rounded-lg overflow-hidden shadow cursor-pointer"])},[e("div",go,[e("h3",{class:d(["capitalize whitespace-wrap font-fancy text-base text-indigo-600 text-left"]),title:t.name},c(t.name),9,bo),e("p",wo,[e("span",ko,[Co,b(" "+c(t.rate),1)])])]),e("p",{class:d(["w-24 h-24 px-2 py-1 flex items-center justify-center uppercase font-semibold whitespace-wrap text-center text-sm font-fancy bg-stone-50 text-secondary-300 select-none overflow-hidden"]),title:t.name},c(t.name),9,$o)],10,yo)]))),128))])):(n(),a("ul",Vo,[(n(!0),a(C,null,U(D.value,t=>(n(),a("li",{key:t.id,onClick:u=>{R(t.id)},class:"relative"},[e("button",{type:"button",title:t.name,class:d(["flex items-center gap-x-1.5 w-full h-28 rounded-md px-3 py-2 text-sm font-semibold shadow border focus:outline-none focus:ring-2 focus:ring-offset-2",t.rate?"text-stone-600 bg-stone-100 hover:bg-stone-50 border-stone-200 focus:ring-offset-stone-50 focus:ring-stone-400":"text-yellow-700 bg-yellow-100 hover:bg-yellow-50 border-yellow-200 focus:ring-offset-yellow-50 focus:ring-yellow-400"])},[e("h3",{class:d(["w-full flex items-center justify-center capitalize whitespace-wrap font-fancy select-none",lt(t.name)])},c(t.name),3)],10,zo),e("p",Uo,[e("span",So,[jo,b(" "+c(t.rate),1)])])],8,No))),128))]))])):V.value!="top_sold"?(n(),a("div",Ao,[e("div",Mo,[e("div",To,[r(s($t),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),b(" Product not found ")])])])):_("",!0)])])])])])])]),e("aside",Oo,[e("form",{onSubmit:Ee(ot,["prevent"]),class:"flex flex-col relative w-full h-full min-h-screen divide-y divide-stone-200"},[e("div",Po,[e("div",qo,[e("div",Bo,[e("div",Do,[Fo,s(l).group_items.length?(n(),a("a",{key:0,onClick:o[8]||(o[8]=t=>tt()),href:"#",title:"Reset",class:"text-sm font-medium text-blue-600 hover:text-blue-500 border-b border-dashed border-blue-500 leading-4 hover:border-solid"}," Reset ")):_("",!0)]),e("div",Ko,[r(s(It),{as:"div",class:"relative"},{default:f(()=>[e("div",null,[r(s(Mt),{class:"max-w-xs bg-white rounded-full border border-gray-300 flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 py-1 lg:p-2 lg:rounded-md lg:hover:bg-gray-50"},{default:f(()=>[e("span",Lo,[Ro,b(c(W.value.name),1)]),r(s(qt),{class:"shrink-0 ml-1 h-5 w-5 text-gray-400 lg:block","aria-hidden":"true"})]),_:1})]),r(xt,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:f(()=>[r(s(Tt),{class:"z-10 origin-top-right absolute right-0 mt-2 w-32 lg:w-40 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:f(()=>[(n(!0),a(C,null,U(s(m).props.branches,t=>(n(),S(s(Ot),{key:t.id},{default:f(({active:u,close:y})=>[r(s(F),{href:i.route("index",{branch:t.id}),method:"post",as:"button",onClick:y,class:d([u||t.id==W.value.id?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 w-full text-left"])},{default:f(()=>[b(c(t.name),1)]),_:2},1032,["href","onClick","class"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])])])]),e("div",{class:d(["flex-1 flex flex-col w-full overflow-y-auto shrink-0 divide-y-2",s(l).order_id?"divide-blue-500":"divide-stone-500/40"])},[e("section",{class:d(["w-full h-full text-stone-700",s(l).order_id?"bg-blue-100/10":"bg-stone-50"])},[e("div",{class:d(["flex flex-col max-h-80 overflow-y-auto divide-y",s(l).order_id?"divide-blue-100":"divide-stone-200"])},[(n(!0),a(C,null,U(s(l).group_items,(t,u)=>(n(),a("div",{key:u,class:"py-2 px-3 flex flex-col font-medium sm:text-sm space-y-1"},[e("div",Eo,c(u+1+". "+t.product_name),1),e("div",Go,[e("div",Wo," TK "+c(t.rate),1),e("div",Ho,[e("button",{type:"button",onClick:y=>{Qe(t.product_id),t.quantity<=0&&s(l).group_items.splice(u,1)},class:"inline-flex items-center w-auto h-8 px-1 py-1 text-inherit rounded hover:shadow-md"},[t.quantity>1?(n(),S(s(Vt),{key:0,class:"h-5 w-5","aria-hidden":"true"})):(n(),S(s(Kt),{key:1,class:"h-5 w-5 text-red-600","aria-hidden":"true"}))],8,Yo),h(e("input",{"onUpdate:modelValue":y=>t.quantity=y,type:"text",class:"px-1 py-1 h-8 w-10 rounded-none text-center sm:text-base font-normal border-transparent focus:ring-indigo-500 focus:border-indigo-500"},null,8,Zo),[[w,t.quantity]]),e("button",{type:"button",onClick:y=>{R(t.product_id)},class:"inline-flex items-center w-auto h-8 px-1 py-1 text-inherit rounded hover:shadow-md"},[r(s(Nt),{class:"h-5 w-5","aria-hidden":"true"})],8,Jo)])])]))),128))],2)],2),e("section",Qo,[e("div",Xo,[e("div",el,[e("div",tl,c(s(l).group_items.length)+" Items",1),e("div",sl,c(s(l).group_items.reduce((t,u)=>t+Number(u.quantity),0))+" Units ",1),e("div",ol,[e("div",ll,c(q.value),1)])]),s(m).props.module.discount?(n(),a("div",il,[nl,e("div",al,[e("div",rl,[h(e("input",{"onUpdate:modelValue":o[9]||(o[9]=t=>Y.value=t),onKeyup:o[10]||(o[10]=t=>et()),placeholder:"Member Code",type:"text",autocomplete:"off",class:d(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,544),[[w,Y.value]]),e("span",dl,[N.message?N.success?(n(),S(s(le),{key:2,class:d(["h-5 w-5"]),"aria-hidden":"true"})):(n(),S(s(ie),{key:1,class:d(["h-5 w-5"]),"aria-hidden":"true"})):(n(),S(s(Rt),{key:0,class:d(["h-5 w-5"]),"aria-hidden":"true"}))])]),e("p",{class:d(["mt-1 font-medium",N.success?"text-green-600":"text-red-600"])},c(N.message),3)])])):_("",!0),$.value?_("",!0):(n(),a("div",cl,[ul,e("div",pl,[r(K,{class:"w-full",modelValue:s(l).discount_type,"onUpdate:modelValue":o[11]||(o[11]=t=>s(l).discount_type=t),items:k.discountTypes,hideIcon:!0},null,8,["modelValue","items"])]),e("div",ml,[h(e("input",{id:"discount_rate","onUpdate:modelValue":o[12]||(o[12]=t=>s(l).discount_rate=t),placeholder:[s(l).discount_type=="percent"?"Rate %":"Amount"],type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:d(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,8,fl),[[w,s(l).discount_rate]])])])),!$.value&&s(l).discount_type=="percent"&&Number(s(l).discount_rate)>0?(n(),a("div",xl,[hl,e("div",vl,c(s(l).discount_rate)+"%",1),e("div",_l,[h(e("input",{id:"discount_amount","onUpdate:modelValue":o[13]||(o[13]=t=>B.value=t),readonly:"",placeholder:"Discount",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:d(["block w-full px-4 text-left text-xs sm:text-sm bg-stone-100 border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 rounded"])},null,512),[[w,B.value]])])])):_("",!0),s(l).service_cost>0?(n(),a("div",yl,[gl,e("div",bl,[h(e("input",{id:"service_cost","onUpdate:modelValue":o[14]||(o[14]=t=>s(l).service_cost=t),readonly:"",placeholder:"Service Cost",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:d(["block w-full px-4 text-left text-xs sm:text-sm bg-stone-100 border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 rounded"])},null,512),[[w,s(l).service_cost]])])])):_("",!0),$.value?_("",!0):(n(),a("div",wl,[e("div",kl,[e("div",Cl,[b(" VAT "),e("span",null,"("+c(s(l).vat_rate)+"%)",1)])]),e("div",$l,[h(e("input",{id:"vat_amount","onUpdate:modelValue":o[15]||(o[15]=t=>Z.value=t),readonly:"",placeholder:"VAT",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:d(["block w-full px-4 text-left text-xs sm:text-sm bg-stone-100 border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 rounded"])},null,512),[[w,Z.value]])]),e("div",Vl,c(O.value),1)])),$.value?_("",!0):(n(),a("div",Nl,[e("div",zl,[h(e("input",{id:"cash","onUpdate:modelValue":o[16]||(o[16]=t=>I.value=t),onClick:o[17]||(o[17]=t=>L.value=!L.value),readonly:"",placeholder:"Amount",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:d([I.value>=O.value?"ring-green-400 focus:ring-green-400":"ring-red-400 focus:ring-red-400","block w-full px-4 border-none text-left text-xs sm:text-sm ring-2 hover:bg-stone-100 focus:ring-2 focus:bg-transparent focus:outline-none rounded-md"])},null,2),[[w,I.value]])]),e("div",Ul,[e("div",{class:d([te.value<0?"text-red-500":"text-stone-700","text-right"])},c(he.value),3)])])),e("div",Sl,[e("div",jl,[e("div",Al,[Ml,h(e("input",{id:"customer_mobile","onUpdate:modelValue":o[18]||(o[18]=t=>s(l).customer_mobile=t),onKeyup:ve,placeholder:"Customer Mobile",autocomplete:"newPassword",type:"text",class:d(["pl-14","block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,544),[[w,s(l).customer_mobile]])])]),e("div",Tl,[h(e("input",{id:"customer_name","onUpdate:modelValue":o[19]||(o[19]=t=>s(l).customer_name=t),placeholder:"Name",type:"text",class:d(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,512),[[w,s(l).customer_name]])])]),h(e("div",Ol,[e("div",Il,[h(e("textarea",{id:"delivery_address","onUpdate:modelValue":o[20]||(o[20]=t=>s(l).delivery_address=t),rows:"1",placeholder:"Address",class:d(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},`
                                            `,512),[[w,s(l).delivery_address]])])],512),[[oe,s(m).props.module.delivery&&((x=k.order)==null?void 0:x.order_delivery)]]),$.value?_("",!0):(n(),a("div",Pl,[ql,e("div",Bl,[r(K,{class:"",position:"top",modelValue:s(l).waiter_id,"onUpdate:modelValue":o[21]||(o[21]=t=>s(l).waiter_id=t),items:k.waiters,placeholder:"Select Waiter"},null,8,["modelValue","items"])])])),e("div",Dl,[e("div",Fl,[r(K,{class:"",position:"top",modelValue:s(l).dine_type,"onUpdate:modelValue":o[22]||(o[22]=t=>s(l).dine_type=t),items:k.dineTypes,hideIcon:!0},null,8,["modelValue","items"])]),e("div",Kl,[h(e("input",{id:"guest_number","onUpdate:modelValue":o[23]||(o[23]=t=>s(l).guest_number=t),placeholder:"No. of Guests",required:s(l).dine_type=="dine-in",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:d(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,8,Ll),[[w,s(l).guest_number]])]),e("div",Rl,[r(K,{class:"",position:"top",modelValue:s(l).table,"onUpdate:modelValue":o[24]||(o[24]=t=>s(l).table=t),items:k.tables,hideIcon:!0},null,8,["modelValue","items"])])]),e("div",El,[e("div",Gl,[h(e("input",{id:"note","onUpdate:modelValue":o[25]||(o[25]=t=>s(l).note=t),placeholder:"Note",type:"text",class:d(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,512),[[w,s(l).note]])])]),Q.value?(n(),a("div",Wl,[e("div",Hl,[h(e("input",{"onUpdate:modelValue":o[26]||(o[26]=t=>s(l).date_time=t),type:"datetime-local",class:d(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,512),[[w,s(l).date_time]])])])):_("",!0),(z=k.order)!=null&&z.is_deliverable&&s(m).props.module.delivery?(n(),a("div",Yl,[Zl,e("div",Jl,[r(K,{class:"",position:"top",modelValue:s(l).rider_id,"onUpdate:modelValue":o[27]||(o[27]=t=>s(l).rider_id=t),items:de.value,hideIcon:!0},null,8,["modelValue","items"])]),e("div",Ql,[r(K,{class:"",position:"top",modelValue:s(l).status,"onUpdate:modelValue":o[28]||(o[28]=t=>s(l).status=t),items:k.statuses,hideIcon:!0},null,8,["modelValue","items"])])])):_("",!0)])])],2),e("div",Xl,[e("div",ei,[e("div",ti,[e("button",{type:"submit",disabled:s(l).processing,class:"inline-flex items-center gap-x-1.5 rounded-md bg-green-500 px-3 py-2 text-sm font-semibold text-green-50 shadow-sm hover:bg-green-600 border border-green-500"},[r(s(le),{class:"hidden sm:block -ml-0.5 h-5 w-5","aria-hidden":"true"}),Q.value?(n(),a("span",oi," Update ")):(n(),a("span",li," Place Order "))],8,si)]),s(m).props.navigation.routes.includes("pos2.print")&&Q.value?(n(),a("button",{key:0,onClick:o[29]||(o[29]=t=>st()),type:"button",class:"inline-flex items-center gap-x-1.5 rounded-md bg-blue-50 px-3 py-2 text-sm font-semibold text-blue-700 shadow-sm hover:bg-blue-100 border border-blue-100"},[r(s(Lt),{class:"hidden sm:block -ml-0.5 h-5 w-5","aria-hidden":"true"}),b(" Print ")])):_("",!0)])])],40,Io)])])]),r(s(Ze),{as:"template",show:L.value},{default:f(()=>[r(s(He),{as:"div",class:"relative z-10",onClose:o[32]||(o[32]=t=>L.value=!1)},{default:f(()=>[r(s(E),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:f(()=>[ii]),_:1}),e("div",ni,[e("div",ai,[r(s(E),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:f(()=>[r(s(Ye),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},{default:f(()=>{var t;return[e("div",ri,[e("button",{type:"button",class:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[30]||(o[30]=u=>L.value=!1)},[di,r(s(ie),{class:"h-6 w-6","aria-hidden":"true"})])]),e("div",ci,[e("div",ui,[r(s(jt),{as:"h3",class:"text-lg font-semibold leading-6 text-gray-900"},{default:f(()=>[b(" Payment Amount -/ "+c(O.value),1)]),_:1}),T.value?(n(),a("div",pi,[e("dl",mi,[e("dd",fi,[e("div",xi,[hi,e("div",vi,": "+c(s(l).customer_name),1)]),e("div",_i,[yi,e("div",gi,": "+c(s(l).customer_mobile),1)]),s(m).props.module.token>0?(n(),a("div",bi,[wi,e("div",ki,[e("div",Ci,[b(" : "+c((t=T.value)==null?void 0:t.balance)+" ",1),$i,r(s(We),{class:"mx-2 h-5 w-5 text-gray-800","aria-hidden":"true"}),b(" "+c(H.value)+" ",1),Vi])])])):_("",!0)])])])):_("",!0),e("table",Ni,[e("thead",zi,[e("tr",null,[Ui,e("th",Si,[e("div",{class:d(["block w-full px-0 py-0 text-left text-sm sm:text-2xl border-transparent rounded focus:ring-gray-400 focus:border-gray-400 focus:bg-transparent",I.value>=O.value?"text-green-600":"text-red-600"])},c(I.value),3)])]),s(m).props.module.token>0&&T.value?(n(),a("tr",ji,[e("td",Ai,[e("div",Mi,[b(" Token Used "),h(e("input",{type:"checkbox",id:"use-token","onUpdate:modelValue":o[31]||(o[31]=u=>s(l).token_use=u),class:"group-checkbox form-checkbox w-5 h-5 focus:ring-primary-600 focus:border-primary-600 text-primary-600 transition duration-150 ease-in-out rounded select-none cursor-pointer"},null,512),[[ht,s(l).token_use]])])]),e("td",Ti,[s(l).token_use?(n(),a("div",Oi,[b(c(s(l).token*ne.value)+" ",1),Ii,r(s(We),{class:"mx-2 h-5 w-5 text-gray-800","aria-hidden":"true"}),b(" "+c(s(l).token)+" ",1),Pi])):_("",!0)])])):_("",!0)]),e("tbody",qi,[(n(!0),a(C,null,U(se.value,u=>(n(),a("tr",{key:u.id},[e("td",Bi,[e("p",{style:vt(it(u))},c(u.name),5)]),e("td",Di,[h(e("input",{type:"text","onUpdate:modelValue":y=>u.amount=y,class:"block w-full px-2 py-1.5 text-left text-xs sm:text-sm border-stone-300 focus:ring-gray-400 focus:border-gray-400 hover:bg-stone-100 focus:bg-transparent rounded"},null,8,Fi),[[w,u.amount]])])]))),128))])])])])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),k.order?(n(),a("div",Ki,[r(gt,{order:k.order},null,8,["order"])])):_("",!0)],64)}}};export{cn as default};
