import{K as Mt,A as g,q as Q,h as le,T as it,k as zt,E as at,Y as Tt,o as a,f as n,a as d,u as s,b as e,t as p,F as N,r as M,w as v,n as m,i as y,x as $,_ as It,d as k,g as w,e as nt,p as ie,v as rt,O as jt,Z as At,c as B,m as dt,j as G,D as Pt,$ as Ot,U as Bt,V as Et,y as Ft}from"./app-43394236.js";import{_ as Lt,r as ct}from"./Notification-4e8b8edc.js";import{_ as qt}from"./Receipt-9221911c.js";import{_ as F}from"./Listbox-93365c37.js";import{u as Dt,a as Kt,r as Rt,b as Gt,c as Ht,d as Wt,e as Yt,f as ut}from"./order-setting-f524905e.js";import{_ as Zt}from"./_plugin-vue_export-helper-c27b6911.js";import{r as Jt,a as Qt,U as pt,h as H,G as mt,S as ft,b as Xt,V as es}from"./transition-a46c0b1d.js";import{r as ts,R as ss,h as os,y as ls,M as is}from"./menu-d79329d0.js";import{r as as,a as ns}from"./ShoppingBagIcon-d763d535.js";import{r as rs,a as ds}from"./Bars3BottomLeftIcon-ceadc191.js";import{r as xt}from"./XMarkIcon-ae32771d.js";import{r as cs}from"./MagnifyingGlassIcon-60946dd0.js";import{r as us}from"./TrashIcon-0f8d4aa3.js";import{r as ps}from"./PrinterIcon-bfbe258d.js";import"./_commonjsHelpers-de833af9.js";import"./XMarkIcon-bc558b0c.js";import"./ChevronUpDownIcon-5cd8b824.js";import"./use-outside-click-e0c0d3b1.js";import"./use-text-value-ed13f69d.js";import"./hidden-2febf338.js";import"./use-controllable-bc8024f1.js";const f=C=>(Bt("data-v-b173e03c"),C=C(),Et(),C),ms={class:"flex h-screen print:hidden"},fs={class:"hidden w-28 overflow-y-auto bg-primary-700 lg:block"},xs={class:"flex w-full h-full flex-col items-center py-6"},hs={href:"/",class:"flex flex-shrink-0 items-center"},_s=["src"],vs={key:1,class:"text-secondary-500 px-3 text-xl font-fancy leading-6 font-medium"},gs={class:"mt-6 w-full flex-1 space-y-1 px-2"},ys={class:"mt-2"},bs={class:"pb-5 w-full flex flex-col space-y-1 px-2"},ws=f(()=>e("span",{class:"mt-2 flex items-center"},"Logout",-1)),ks=["src"],Cs={class:"mt-2 text-white text-xs whitespace-wrap text-center"},$s=f(()=>e("div",{class:"sr-only"},[e("p",null,"Account settings")],-1)),Vs=f(()=>e("div",{class:"fixed inset-0 bg-stone-600 bg-opacity-75"},null,-1)),Ns={class:"fixed inset-0 z-40 flex"},Ss={class:"absolute top-1 right-0 -mr-14 p-1"},Us=f(()=>e("span",{class:"sr-only"},"Close sidebar",-1)),Ms={class:"flex flex-shrink-0 items-center px-4"},zs=["src"],Ts={key:1,class:"text-secondary-500 px-3 text-xl font-fancy leading-6 font-medium"},Is={class:"mt-5 h-0 flex-1 overflow-y-auto px-2"},js={class:"flex h-full flex-col"},As={class:"space-y-1"},Ps=["href","aria-current"],Os=f(()=>e("div",{class:"w-14 flex-shrink-0","aria-hidden":"true"},null,-1)),Bs={class:"flex flex-1 flex-col overflow-hidden"},Es={class:"min-w-md flex flex-1 items-stretch overflow-hidden"},Fs={class:"flex-1 overflow-y-auto"},Ls={"aria-labelledby":"primary-heading",class:"flex h-full min-w-0 flex-1 flex-col lg:order-last"},qs=f(()=>e("h1",{id:"primary-heading",class:"sr-only"},"Products",-1)),Ds={class:"flex flex-col relative w-full h-full divide-y divide-stone-200"},Ks={class:"flex-1 flex w-full shrink-0 bg-white space-y-2 overflow-y-auto"},Rs={class:"flex-1 flex flex-col lg:flex-row divide-x divide-stone-200 w-full"},Gs={class:"hidden xl:block shrink-0 w-full xl:w-56 relative z-0 focus:outline-none h-full overflow-y-auto"},Hs={class:"flex-1 min-h-0","aria-label":"Directory"},Ws={class:"relative"},Ys={role:"list",class:"flex flex-col relative z-0 divide-y divide-stone-200 overflow-y-auto border-b"},Zs=["onClick"],Js={class:"flex-1 min-w-0"},Qs={type:"button",class:"focus:outline-none"},Xs=f(()=>e("span",{class:"absolute inset-0","aria-hidden":"true"},null,-1)),eo={class:"px-4 whitespace-nowrap text-sm leading-4 font-medium capitalize"},to={class:"flex-1 flex flex-col relative z-0 divide-y divide-stone-200 overflow-hidden focus:outline-none"},so={class:"w-full"},oo={class:"relative z-10 flex h-12 flex-shrink-0 bg-white shadow-sm"},lo=f(()=>e("span",{class:"sr-only"},"Open sidebar",-1)),io={class:"flex flex-1 justify-between px-4 sm:px-6"},ao={class:"flex flex-1"},no={class:"flex w-full lg:ml-0",action:"#",method:"GET"},ro=f(()=>e("label",{for:"search-field",class:"sr-only"},"Search all files",-1)),co={class:"relative w-full text-stone-400 focus-within:text-stone-600"},uo={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center"},po={class:"relative z-10 bg-white shadow-sm overflow-y-auto"},mo={class:"px-3 overflow-hidden"},fo={role:"list",class:"relative w-full max-h-40 flex gap-2.5 sm:flex-wrap z-0 overflow-x-auto sm:overflow-y-auto px-1 py-3"},xo={class:"whitespace-nowrap"},ho={class:"flex-1 min-w-0 flex justify-center items-center"},_o={class:"flex-1 min-w-0 flex justify-center items-center"},vo={class:"xl:hidden shrink-0 w-full relative z-0 focus:outline-none"},go={class:"flex-1 min-h-0","aria-label":"Directory"},yo={class:"relative"},bo={role:"list",class:"flex relative z-0 overflow-x-auto"},wo=["onClick"],ko={class:"flex-1 min-w-0"},Co={type:"button",class:"focus:outline-none"},$o=f(()=>e("span",{class:"absolute inset-0","aria-hidden":"true"},null,-1)),Vo={class:"px-2 whitespace-nowrap text-sm leading-4 font-medium capitalize"},No={class:"flex-1 h-full overflow-y-auto py-2"},So=f(()=>e("h2",{class:"sr-only"},"All Products",-1)),Uo={class:"absolute bottom-0 flex justify-center gap-2 z-10 mb-6 w-full text-center"},Mo={class:"isolate inline-flex rounded-md shadow-lg shadow-indigo-500/40"},zo={key:0},To=Ft('<div class="h-64 flex justify-center items-center" data-v-b173e03c><div class="inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-gray-600 transition ease-in-out duration-150" data-v-b173e03c><svg class="animate-spin -ml-1 mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-b173e03c><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-b173e03c></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-b173e03c></path></svg> Processing... </div></div>',1),Io=[To],jo={key:1,class:"w-full"},Ao={key:0,class:"w-full transition-all"},Po=["onClick","title"],Oo={class:"w-28 text-right text-stone-700"},Bo={class:"px-3 font-normal text-sm tracking-wider"},Eo=f(()=>e("span",{class:"tracking-tighter text-xs"},"TK",-1)),Fo={key:1,class:"mt-2 px-4 grid grid-cols-1 gap-4 md:grid-cols-2 2xl:grid-cols-3 transition-all"},Lo=["onClick"],qo={class:"flex-1 flex flex-col"},Do=["title"],Ko={class:"mt-2 text-sm tracking-widest text-stone-600 pointer-events-none flex justify-between"},Ro={class:"px-0 font-normal text-sm tracking-wider"},Go=f(()=>e("span",{class:"tracking-tighter text-xs"},"TK",-1)),Ho=["title"],Wo={key:2,role:"list",class:"px-4 py-2 grid gap-4 grid-cols-1 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 transition-all"},Yo=["onClick"],Zo=["title"],Jo={class:"flex items-center justify-between mt-2 text-sm tracking-wide text-stone-600 pointer-events-none"},Qo={class:"px-0 font-normal text-sm tracking-wider"},Xo=f(()=>e("span",{class:"tracking-tighter text-xs"},"TK",-1)),el={key:2,class:"rounded-md p-4"},tl={class:"h-20 flex justify-center items-center"},sl={class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm text-red-600 transition ease-in-out duration-150"},ol={class:"w-1/2 sm:w-96 overflow-y-auto border-l border-gray-200 bg-white px-0 block"},ll=["onSubmit"],il={class:"flex w-full shrink-0 h-12 bg-white shadow-sm"},al={class:"flex justify-center items-center w-full px-4"},nl={class:"flex-1 py-2 hidden sm:flex sm:justify-between sm:items-center"},rl={class:"flex items-center gap-x-2"},dl=f(()=>e("h3",{class:""},"Cart Items",-1)),cl={class:"relative text-gray-400 focus-within:text-gray-600"},ul={class:"ml-2 text-gray-700 text-sm font-medium lg:block"},pl=f(()=>e("span",{class:"sr-only"},"Open user menu for ",-1)),ml=["onClick"],fl={class:"text-sm leading-5 font-semibold capitalize"},xl={class:"flex justify-center items-center"},hl={class:"inline-flex text-sm font-normal leading-5 text-stone-600 text-right sm:text-left"},_l={class:"ml-auto flex items-center rounded-md space-x-2"},vl=["onClick"],gl=["onUpdate:modelValue"],yl=["onClick"],bl={class:"inline-block min-w-full align-middle"},wl={class:"bg-white divide-y divide-stone-200"},kl={class:"px-3 grid grid-cols-3 gap-1 text-xs"},Cl={class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},$l={class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},Vl={class:"py-2 whitespace-nowrap sm:text-lg text-stone-500 text-right"},Nl={class:""},Sl={key:0,class:"px-3 grid grid-cols-3 gap-1 text-xs"},Ul=f(()=>e("div",{class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},"Discount ",-1)),Ml={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},zl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},Tl=["placeholder"],Il={key:1,class:"px-3 grid grid-cols-3 gap-1 text-xs"},jl=f(()=>e("div",{class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},"Amount",-1)),Al={class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},Pl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},Ol={key:2,class:"px-3 grid grid-cols-3 gap-1 text-xs"},Bl=f(()=>e("div",{class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},"Service Cost ",-1)),El={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left col-span-2"},Fl={key:3,class:"px-3 grid grid-cols-3 gap-1 text-xs"},Ll={class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},ql={class:"text-left"},Dl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},Kl={class:"py-2 whitespace-nowrap sm:text-lg text-stone-500 text-left"},Rl={class:"text-right"},Gl={key:4,class:"px-3 grid grid-cols-3 gap-1 text-xs"},Hl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left col-span-2"},Wl={class:"py-2 whitespace-nowrap sm:text-lg text-stone-500 text-left"},Yl={class:"px-3 grid grid-cols-3 gap-1 text-xs"},Zl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left col-span-2"},Jl={class:"relative"},Ql=f(()=>e("span",{class:"absolute py-1.5 px-2 sm:py-2 top-0 left-0 m-px sm:px-2 rounded-l-md border-r border-stone-300 bg-stone-100"}," +88 ",-1)),Xl={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},ei={class:"px-3 grid grid-cols-3 gap-1 text-xs"},ti={class:"py-1 whitespace-nowrap sm:text-lg text-stone-500 text-left col-span-3"},si={key:5,class:"px-3 grid grid-cols-3 gap-1 text-xs"},oi=f(()=>e("div",{class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},"Served By ",-1)),li={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left col-span-2"},ii={class:"px-3 grid grid-cols-3 gap-1 text-xs"},ai={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},ni={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},ri=["required"],di={class:"py-1 whitespace-nowrap sm:text-lg text-stone-500 text-left"},ci={class:"px-3 grid grid-cols-3 gap-1 text-xs"},ui={class:"py-1 whitespace-nowrap sm:text-lg text-stone-500 text-left col-span-3"},pi={key:6,class:"px-3 grid grid-cols-3 gap-1 text-xs"},mi={class:"py-1 whitespace-nowrap sm:text-lg text-stone-500 text-left col-span-3"},fi={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left",style:{"margin-left":"20px"}},xi={key:7,class:"px-3 grid grid-cols-3 gap-1 text-xs"},hi=f(()=>e("div",{class:"py-3 whitespace-nowrap sm:text-sm text-stone-500 text-left"},"Rider",-1)),_i={class:"py-1 whitespace-nowrap sm:text-sm text-stone-500 text-left"},vi={class:"py-1 whitespace-nowrap sm:text-lg text-stone-500 text-left"},gi={class:"h-14 py-2 px-4"},yi={class:"flex items-center justify-between"},bi={class:"flex-shrink-0 flex space-x-3"},wi=["disabled"],ki={key:0},Ci={key:1},$i={key:0,class:"modal-overlay"},Vi=f(()=>e("h2",{class:"modal-title"},"Have you give Loyalty Card to Customer?",-1)),Ni=f(()=>e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),Si={class:"fixed inset-0 z-10 overflow-y-auto"},Ui={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Mi={class:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block"},zi=f(()=>e("span",{class:"sr-only"},"Close",-1)),Ti={class:"sm:flex sm:items-start"},Ii={class:"w-full mt-3 text-center sm:mt-0 sm:text-left"},ji={key:0,class:"mt-2"},Ai={class:"mt-6 flex flex-col sm:mt-1"},Pi={class:"text-sm text-gray-500"},Oi={class:"flex flex-start"},Bi=f(()=>e("div",{class:"w-1/3 text-sm font-normal"},"Customer Name",-1)),Ei={class:"w-2/3 font-medium text-gray-700"},Fi={class:"flex flex-start"},Li=f(()=>e("div",{class:"w-1/3 text-sm font-normal"},"Customer Mobile",-1)),qi={class:"w-2/3 font-medium text-gray-700"},Di={key:0,class:"flex flex-start"},Ki=f(()=>e("div",{class:"w-1/3 text-sm font-normal"},"Available Token",-1)),Ri={class:"w-2/3 font-medium text-gray-700"},Gi={class:"flex items-center"},Hi=f(()=>e("span",{class:"uppercase text-gray-500 ml-1"},"token",-1)),Wi=f(()=>e("span",{class:"uppercase text-gray-500 ml-1"},"bdt",-1)),Yi={class:"mt-4 min-w-full divide-y divide-gray-300"},Zi={class:"divide-y divide-gray-200 bg-white"},Ji=f(()=>e("th",{scope:"col",class:"w-1/2 whitespace-nowrap py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"}," Total Amount ",-1)),Qi={scope:"col",class:"whitespace-nowrap px-2 py-0.5 text-left text-sm font-medium text-gray-900"},Xi={key:0},ea={scope:"col",class:"w-1/2 whitespace-nowrap py-2 pl-4 pr-3 text-left text-sm text-gray-500 sm:pl-0"},ta={class:"flex justify-between"},sa={scope:"col",class:"whitespace-nowrap px-2 py-1 text-left text-sm text-gray-900"},oa={key:0,class:"flex items-center font-normal text-gray-700"},la=f(()=>e("span",{class:"uppercase text-gray-500 ml-1"},"token",-1)),ia=f(()=>e("span",{class:"uppercase text-gray-500 ml-1"},"bdt",-1)),aa={class:"divide-y divide-gray-200 bg-white"},na={class:"whitespace-nowrap py-2 pl-4 pr-3 text-sm sm:pl-0"},ra={class:"whitespace-nowrap px-2 py-1 text-sm text-gray-500"},da=["onUpdate:modelValue"],ca={key:0,class:"hidden print:block"},ua={__name:"POS",props:{order:Object,vat_rate:Number,tables:Array,waiters:Array,pending_orders:Array,dineTypes:Object,discountTypes:Object,statuses:Object,bill_print:Boolean},setup(C){var _e,ve,ge,ye,be,we,ke,Ce,$e,Ve,Ne,Se,Ue,Me,ze,Te,Ie,je,Ae,Pe,Oe,Be,Ee,Fe,Le,qe,De,Ke,Re,Ge,He,We,Ye,Ze,Je,Qe,Xe,et,tt;const r=C,h=Mt(),W=g(!1),L=g(!1),X=g(!1);g(!1),Q({success:"",message:""}),Q({success:"",is_member:"",message:""});const x=Q({success:null,is_member:!1,message:""}),E=g(null),ee=g(h.props.branch??{}),ae=g(Number(h.props.setting.token_value??1)),S=g(h.props.auth.user.is_waiter),ne=g(S.value?h.props.auth.user.id:null),z=g(null),T=g([]),I=g([]),re=g([]),de=g([]),ce=g([]),te=g([]),A=Dt(),j=Kt(),Y=g(0),U=g(""),se=le(()=>{var i;return!!((i=r.order)!=null&&i.id)});le(()=>!!(i=>i.status==="active"));const ue=le(()=>(console.log(r.bill_print),h.props.navigation.routes.includes("pos.print")&&se.value)),P=g(!1);console.log("props.order:",r.order),console.log(P);const l=it({order_id:((_e=r.order)==null?void 0:_e.id)??"",date:(ve=r.order)==null?void 0:ve.date,date_time:(ge=r.order)==null?void 0:ge.datetime_raw,number:(ye=r.order)==null?void 0:ye.number,sub_total:(be=r.order)==null?void 0:be.sub_total,dine_type:((we=r.order)==null?void 0:we.dine_type)??"dine-in",guest_number:(ke=r.order)==null?void 0:ke.guest_number,discount_type:((Ce=r.order)==null?void 0:Ce.discount_type)??"percent",discount_rate:($e=r.order)==null?void 0:$e.discount_rate,discount_amount:(Ve=r.order)==null?void 0:Ve.discount_amount,vat_rate:((Ne=r.order)==null?void 0:Ne.vat_rate)??r.vat_rate,vatable_amount:(Se=r.order)==null?void 0:Se.vatable_amount,vat_amount:(Ue=r.order)==null?void 0:Ue.vat_amount,vat_add:Number((Me=r.order)==null?void 0:Me.vat_add)>0,added_in_loyalty:Number((ze=r.order)==null?void 0:ze.added_in_loyalty)===1,service_cost:((Te=r.order)==null?void 0:Te.service_cost)??ee.value.service_cost,total:(Ie=r.order)==null?void 0:Ie.total,cash:(je=r.order)==null?void 0:je.cash,change:(Ae=r.order)==null?void 0:Ae.change,waiter_id:((Pe=r.order)==null?void 0:Pe.waiter_id)??ne.value,member_code:((Oe=r.order)==null?void 0:Oe.member_code)??null,member_discount_rate:(Be=r.order)==null?void 0:Be.member_discount_rate,customer_id:((Ee=r.order)==null?void 0:Ee.customer_id)??"",customer_name:(Le=(Fe=r.order)==null?void 0:Fe.customer)==null?void 0:Le.name,customer_mobile:(De=(qe=r.order)==null?void 0:qe.customer)==null?void 0:De.mobile,token:((Ke=r.order)==null?void 0:Ke.token)??0,token_use:Number((Re=r.order)==null?void 0:Re.token)>0,note:(Ge=r.order)==null?void 0:Ge.note,table:(He=r.order)==null?void 0:He.stuff_id,status:((We=r.order)==null?void 0:We.status)??"accept",delivery_address:(Ze=(Ye=r.order)==null?void 0:Ye.order_delivery)==null?void 0:Ze.address,rider_id:(Qe=(Je=r.order)==null?void 0:Je.order_delivery)==null?void 0:Qe.rider_id,group_items:((Xe=r.order)==null?void 0:Xe.products)??[],group_methods:((et=r.order)==null?void 0:et.methods)??[]}),pe=it({branch_id:(tt=h.props.branch)==null?void 0:tt.id}),ht=i=>{pe.branch_id=i,h.props.alertMessage={},pe.post(route("index"),{onFinish:()=>{}})};zt(()=>{xe(),Echo.channel(`pos.branches.${ee.value.id}`).listen("OrderPlaced",i=>{let o=r.pending_orders.findIndex(c=>c.id==i.order.id);(!S.value||S.value&&i.order.waiter_id==ne.value)&&o<0&&r.pending_orders.unshift(i.order)}).listen("OrderModified",i=>{let o=r.pending_orders.findIndex(c=>c.id==i.order.id);i.order.status=="complete"&&o>=0?r.pending_orders.splice(o,1):i.order.status!="complete"&&o>=0?r.pending_orders[o]=i.order:i.order.status!="complete"&&o<0&&r.pending_orders.unshift(i.order)})}),at(()=>z.value,i=>{i=="top_sold"?T.value=I.value.filter(o=>re.value.includes(o.id)&&o.status==="active"):T.value=I.value.filter(o=>(i==""||o.product_category_id==i)&&o.status==="active")}),at(()=>r.order,i=>{i&&i.added_in_loyalty!==void 0&&(P.value=!!Number(i.added_in_loyalty))});const me=()=>{l.group_methods=j.paymentMethods.map(i=>{var o;return i.payment_method_id=i.id,i.amount=((o=l.group_methods.find(c=>c.payment_method_id==i.id))==null?void 0:o.amount)??null,i})},fe=()=>{let i=l.group_methods.reduce((u,_)=>u+Number(_.amount),0);console.log(i);let c=Number(l.total)-i,b=0;l.token_use&&c>0&&(b=c>Y.value?Y.value:0);let t=i+b;l.token=b.toFixed(2),l.cash=t.toFixed(2),O()};(async()=>{console.log("Test Load Data"),j.isExpired&&(X.value=!0,await j.load(),X.value=!1),console.log("Test Load Data"),te.value=j.categories,ce.value=j.customers,T.value=j.products.filter(i=>i.status==="active"),I.value=j.products,de.value=j.riders,re.value=j.topProducts,me()})();const q=i=>{let o=I.value.find(b=>b.id==i),c=l.group_items.find(b=>b.product_id==i);if(!o.rate){alert("Item price not set yet!");return}c?c.quantity++:o&&l.group_items.push({id:"",status:"pending",product_id:o.id,product_name:o.name,rate:o.rate,code:o.code,vat_applicable:o.vat_applicable,quantity:1}),O()},_t=i=>{let o=l.group_items.find(c=>c.product_id==i);o.quantity--,O()},vt=()=>{let i=[];if(!I.value.find(c=>c.code==U.value)&&U.value){let c=U.value.toLowerCase();i=I.value.filter(b=>b.status==="active"&&b.name.toLowerCase().includes(c))}i.length>0&&U.value&&(q(i[0].id),U.value=null)},gt=()=>{if(!I.value.find(o=>o.code==U.value)&&U.value){let o=U.value;T.value=I.value.filter(c=>c.status==="active"&&c.name.toLowerCase().includes(o.toLowerCase()))}else T.value=I.value.filter(o=>o.status==="active");z.value=null},O=()=>{let i=l.group_items.reduce((K,R)=>K+Number(R.rate)*Number(R.quantity),0),o=l.group_items.filter(K=>!K.vat_applicable).reduce((K,R)=>K+Number(R.rate)*Number(R.quantity),0),c=Number(l.discount_rate??0),b=Number(l.vat_rate??0),t=Number(l.cash??0),u=Number(l.service_cost??0);u=Math.round(u),i=Math.round(i),o=Math.round(o);let _=c/100,V=l.discount_type=="percent"?i*_:c;V=Math.round(V);let oe=o>0?o/i*V:0;oe=Math.round(oe);let St=o-oe,st=i-V-St+u,Ut=b/100,J=st*Ut;J=Math.round(J);let ot=i+u-V+J,lt=t-ot;l.sub_total=i.toFixed(2),l.discount_amount=V.toFixed(2),l.vatable_amount=st.toFixed(2),l.vat_amount=J,l.total=ot.toFixed(2),l.change=lt>=0?lt.toFixed(2):""},xe=()=>{var i,o;console.log("find customer"),E.value=ce.value.find(c=>c.mobile==l.customer_mobile),console.log(E.value),l.customer_name=(i=E.value)==null?void 0:i.name,Y.value=Number((o=E.value)==null?void 0:o.balance)/ae.value,l.customer_mobile&&yt()},yt=()=>{if(console.log("Checking Eligibility: "+l.customer_mobile),l.customer_mobile.length>9){const i=`${h.props.module.check_eligibility}?phone=${encodeURIComponent(l.customer_mobile)}&service_id=1`;console.log("Eligibility URL: ",i),Tt.post(i).then(o=>{const c=o.data;x.success=c.eligible,x.is_member=c.customer_id!==null,x.message=c.eligible?"Customer is eligible for the service.":"Customer is not eligible for the service.",console.log("Checking Eligibility: "+x.message),c.eligible?(c.total_services!==void 0&&(x.message+=` Customer has used ${c.total_services} service(s).`,(c.total_services>5&&c.total_services<7||c.total_services>9&&c.total_services<1)&&(x.message=" He will get a free coffee!")),console.log("Checking Eligibility: "+x.message)):(x.success=!1,x.message=" No Registered Member In Loyalty Program!",console.log("Checking Eligibility: "+x.message))}).catch(o=>{x.success=!1,x.is_member=!1,x.message="Error checking eligibility. Please try again.",console.error("Eligibility API Error: ",o.response?o.response.data:o)})}else x.success=null,x.is_member=null,x.message=null},bt=()=>{confirm("Are you sure you want to reset?")&&(l.reset(),O())},wt=()=>{h.props.alertMessage={},l.post(route("pos.printed"),{onFinish:()=>{window.print(),setTimeout(()=>{jt.visit(route("pos.create"))},1e3)}})},Z=g(!1),kt=()=>{console.log(x),console.log(x.success),l.customer_mobile?(console.log("Checking eligibility success: "+x.success),l.total>500?x.success===!1||x===""?(console.log("Eligibility check failed or is empty, opening modal."),Z.value=!0,console.log("Modal opened: "+x.success)):(P.value=!0,console.log("Customer added to loyalty: "+x.success),console.log("added_in_loyalty value: "+P.value),D()):D()):D()},D=()=>{var i;l.added_in_loyalty=P.value??!1,U.value=null,l.order_id=(i=r.order)==null?void 0:i.id,h.props.alertMessage={},l.post(route("pos.store"),{onSuccess:o=>{var c,b,t,u,_,V;l.order_id=((c=o.props.order)==null?void 0:c.id)??"",l.date=(b=o.props.order)==null?void 0:b.date,l.date_time=(t=o.props.order)==null?void 0:t.datetime_raw,l.invoice_number=(u=o.props.order)==null?void 0:u.invoice_number,l.group_items=((_=o.props.order)==null?void 0:_.products)??[],l.group_methods=((V=o.props.order)==null?void 0:V.methods)??[],me()},onFinish:()=>{S.value&&!l.order_id&&l.reset()}})},Ct=()=>{P.value=!0,console.log("Added in loyalty card!"),console.log(P.value),Z.value=!1,D()},$t=()=>{P.value=!1,console.log("No Added in loyalty card!"),D(),Z.value=!1},Vt=i=>i.length<20?"text-xl/7":i.length<30?"text-lg/6":i.length<40?"text-base/5":"text-sm/4",Nt=i=>Q({backgroundColor:i.bg_color,color:i.text_color,fontSize:i.text_size,fontWeight:i.font_weight}),he=[{name:"Dashboard",icon:Jt,href:route("dashboard"),current:!1,visible:!S.value},{name:"POS",icon:ts,href:route("pos.create"),current:!0,visible:!0},{name:"Kitchen",icon:as,href:route("production.index"),current:!1,visible:h.props.module.production},{name:"Order Bill",icon:Qt,href:route("order.index"),current:!1,visible:!S.value}];return(i,o)=>{var c,b;return a(),n(N,null,[d(s(At),{title:"POS"}),e("div",ms,[d(Lt),e("div",fs,[e("div",xs,[e("a",hs,[s(h).props.app.logo?(a(),n("img",{key:0,class:"h-16 w-auto",src:s(h).props.app.logo,alt:"logo"},null,8,_s)):(a(),n("span",vs,p(s(h).props.app.name),1))]),e("div",gs,[(a(),n(N,null,M(he,t=>y(d(s(G),{key:t.name,href:t.href,class:m([t.current?"bg-primary-800 text-white":"text-primary-100 hover:bg-primary-800 hover:text-white","group w-full p-3 rounded-md flex flex-col items-center text-xs font-medium"]),"aria-current":t.current?"page":void 0},{default:v(()=>[(a(),B(dt(t.icon),{class:m([t.current?"text-white":"text-primary-300 group-hover:text-white","h-6 w-6"]),"aria-hidden":"true"},null,8,["class"])),e("span",ys,p(t.name),1)]),_:2},1032,["href","class","aria-current"]),[[ie,t.visible]])),64))]),e("div",bs,[d(s(G),{href:i.route("logout"),method:"post",as:"button",class:m(["text-primary-100 hover:bg-primary-800 hover:text-white","group w-full p-3 rounded-md flex flex-col items-center text-xs font-medium"])},{default:v(()=>[d(s(rs),{class:"text-primary-300 group-hover:text-white h-6 w-6","aria-hidden":"true"}),ws]),_:1},8,["href"]),d(s(G),{href:i.route("profile.index"),class:"w-full flex-shrink-0"},{default:v(()=>{var t,u;return[e("img",{class:"mx-auto block h-10 w-10 rounded-full",src:(t=s(h).props.auth.user)==null?void 0:t.image_url,alt:"Image"},null,8,ks),e("p",Cs,p((u=s(h).props.auth.user)==null?void 0:u.name),1),$s]}),_:1},8,["href"])])])]),d(s(ft),{as:"template",show:W.value},{default:v(()=>[d(s(pt),{as:"div",class:"relative z-20 lg:hidden",onClose:o[1]||(o[1]=t=>W.value=!1)},{default:v(()=>[d(s(H),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[Vs]),_:1}),e("div",Ns,[d(s(H),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:v(()=>[d(s(mt),{class:"relative flex w-full max-w-xs flex-1 flex-col bg-primary-700 pt-5 pb-4"},{default:v(()=>[d(s(H),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[e("div",Ss,[e("button",{type:"button",class:"flex h-12 w-12 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-white",onClick:o[0]||(o[0]=t=>W.value=!1)},[d(s(xt),{class:"h-6 w-6 text-white","aria-hidden":"true"}),Us])])]),_:1}),e("div",Ms,[s(h).props.app.logo?(a(),n("img",{key:0,class:"h-16 w-auto",src:s(h).props.app.logo,alt:"logo"},null,8,zs)):(a(),n("span",Ts,p(s(h).props.app.name),1))]),e("div",Is,[e("nav",js,[e("div",As,[(a(),n(N,null,M(he,t=>y(e("a",{key:t.name,href:t.href,class:m([t.current?"bg-primary-800 text-white":"text-primary-100 hover:bg-primary-800 hover:text-white","group py-2 px-3 rounded-md flex items-center text-sm font-medium"]),"aria-current":t.current?"page":void 0},[(a(),B(dt(t.icon),{class:m([t.current?"text-white":"text-primary-300 group-hover:text-white","mr-3 h-6 w-6"]),"aria-hidden":"true"},null,8,["class"])),e("span",null,p(t.name),1)],10,Ps),[[ie,t.visible]])),64))])])])]),_:1})]),_:1}),Os])]),_:1})]),_:1},8,["show"]),e("div",Bs,[e("div",Es,[e("main",Fs,[e("section",Ls,[qs,e("div",Ds,[e("div",Ks,[e("section",Rs,[e("div",Gs,[e("nav",Hs,[e("div",Ws,[e("ul",Ys,[(a(!0),n(N,null,M(te.value,(t,u)=>(a(),n("li",{key:u,onClick:_=>z.value=z.value==t.id?null:t.id,class:m([z.value==t.id?"bg-indigo-500 text-white":"hover:bg-stone-100 text-stone-900","relative px-2 py-3 flex items-center h-12"])},[e("div",Js,[e("button",Qs,[Xs,e("p",eo,p(t.name),1)])])],10,Zs))),128))])])])]),e("div",to,[e("header",so,[e("div",oo,[e("button",{type:"button",class:"border-r border-stone-200 px-4 text-stone-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 lg:hidden",onClick:o[2]||(o[2]=t=>W.value=!0)},[lo,d(s(ds),{class:"h-6 w-6","aria-hidden":"true"})]),e("div",io,[e("div",ao,[e("form",no,[ro,e("div",co,[e("div",uo,[d(s(cs),{class:"h-5 w-5 flex-shrink-0","aria-hidden":"true"})]),y(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>U.value=t),onKeydown:o[4]||(o[4]=It(nt(t=>vt(),["prevent"]),["enter"])),onInput:o[5]||(o[5]=t=>gt()),id:"search-field",class:"h-full w-full border-transparent py-2 pl-8 pr-3 text-base text-stone-900 placeholder-stone-500 focus:border-transparent focus:placeholder-stone-400 focus:outline-none focus:ring-0",placeholder:"Search",type:"search"},null,544),[[$,U.value]])])])])])])]),e("aside",null,[e("div",po,[e("div",mo,[e("ul",fo,[e("li",xo,[e("div",ho,[d(s(G),{href:i.route("pos.create"),title:"New",class:"inline-flex items-center gap-x-1.5 rounded-md bg-indigo-500 pl-2 pr-3 py-1.5 text-sm font-medium text-white shadow-sm hover:bg-indigo-600 border border-indigo-500"},{default:v(()=>[d(s(Rt),{class:"-ml-0.5 h-5 w-5","aria-hidden":"true"}),k(" New ")]),_:1},8,["href"])])]),(a(!0),n(N,null,M(C.pending_orders,(t,u)=>{var _;return a(),n("li",{key:u,class:"whitespace-nowrap"},[e("div",_o,[d(s(G),{href:i.route("pos.create",t==null?void 0:t.id),title:t!=null&&t.is_printed?"Bill printed":"",class:m(["inline-flex items-center gap-x-1.5 rounded-md bg-indigo-50 px-2 py-1.5 text-sm font-medium text-indigo-600 shadow-sm hover:bg-indigo-100 border",(t==null?void 0:t.status)=="pending"?"bg-yellow-100 border-yellow-200 text-yellow-900 hover:bg-yellow-200":"border-indigo-200",((_=C.order)==null?void 0:_.id)==(t==null?void 0:t.id)?"ring-2 ring-secondary-500 ring-offset-2":""])},{default:v(()=>[t!=null&&t.is_deliverable?(a(),B(s(Xt),{key:0,class:"-ml-0.5 h-5 w-5","aria-hidden":"true"})):(a(),B(s(Gt),{key:1,class:"-ml-0.5 h-5 w-5","aria-hidden":"true"})),k(" "+p([t==null?void 0:t.invoice_number.substr(6),t==null?void 0:t.table_name].filter(V=>V).join(" - "))+" ",1),t!=null&&t.is_printed?(a(),B(s(ct),{key:2,class:"-mr-0.5 h-5 w-5","aria-hidden":"true"})):w("",!0)]),_:2},1032,["href","title","class"])])])}),128))])])])]),e("div",vo,[e("nav",go,[e("div",yo,[e("ul",bo,[(a(!0),n(N,null,M(te.value,(t,u)=>(a(),n("li",{key:u,onClick:_=>z.value=z.value?null:t.id,class:m([z.value==t.id?"bg-indigo-500 text-white":"hover:bg-stone-100 text-stone-900","relative px-2 py-3 flex items-center"])},[e("div",ko,[e("button",Co,[$o,e("p",Vo,p(t.name),1)])])],10,wo))),128))])])])]),e("div",No,[So,e("div",Uo,[e("div",Mo,[e("button",{type:"button",onClick:o[6]||(o[6]=t=>s(A).set("table")),class:m([s(A).posLayout=="table"?"bg-indigo-600":"bg-indigo-500","rounded-l-md px-3.5 py-2 text-sm font-semibold text-white hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"])}," Table ",2),e("button",{type:"button",onClick:o[7]||(o[7]=t=>s(A).set("grid")),class:m([s(A).posLayout=="grid"?"bg-indigo-600":"bg-indigo-500","-ml-px rounded-none px-3.5 py-2 text-sm font-semibold text-white hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"])}," Card ",2),e("button",{type:"button",onClick:o[8]||(o[8]=t=>s(A).set("box")),class:m([s(A).posLayout=="box"?"bg-indigo-600":"bg-indigo-500","-ml-px rounded-r-md px-3.5 py-2 text-sm font-semibold text-white hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"])}," Box ",2)])]),X.value?(a(),n("div",zo,Io)):T.value.length>0?(a(),n("div",jo,[s(A).posLayout=="table"?(a(),n("table",Ao,[e("tbody",null,[(a(!0),n(N,null,M(T.value,(t,u)=>(a(),n("tr",{key:t.id,class:m([u%2==1?"bg-white":"bg-stone-100","hover:bg-primary-50"])},[e("td",null,[e("h3",{onClick:_=>{q(t.id)},class:m([t.rate?"text-stone-700 cursor-pointer":"text-red-700","flex items-start justify-start capitalize whitespace-wrap text-base font-fancy px-3 py-2"]),title:t.name},p(t.name),11,Po)]),e("td",Oo,[e("span",Bo,[Eo,k(" "+p(t.rate),1)])])],2))),128))])])):s(A).posLayout=="grid"?(a(),n("div",Fo,[(a(!0),n(N,null,M(T.value,t=>(a(),n("div",{key:t.id,class:"relative"},[e("div",{onClick:u=>{q(t.id)},class:m([t.current?"ring-2 ring-offset-2 ring-primary-500":"focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-stone-100 focus-within:ring-primary-500","flex gap-4 px-3 pl-5 py-3 group w-full border border-stone-200 rounded-lg overflow-hidden shadow cursor-pointer"])},[e("div",qo,[e("h3",{class:m(["capitalize whitespace-wrap font-fancy text-base text-indigo-600 text-left"]),title:t.name},p(t.name),9,Do),e("p",Ko,[e("span",Ro,[Go,k(" "+p(t.rate),1)])])]),e("p",{class:m(["w-24 h-24 px-2 py-1 flex items-center justify-center uppercase font-semibold whitespace-wrap text-center text-sm font-fancy bg-stone-50 text-secondary-300 select-none overflow-hidden"]),title:t.name},p(t.name),9,Ho)],10,Lo)]))),128))])):(a(),n("ul",Wo,[(a(!0),n(N,null,M(T.value,t=>(a(),n("li",{key:t.id,onClick:u=>{q(t.id)},class:"relative"},[e("button",{type:"button",title:t.name,class:m(["flex items-center gap-x-1.5 w-full h-28 rounded-md px-3 py-2 text-sm font-semibold shadow border focus:outline-none focus:ring-2 focus:ring-offset-2",t.rate?"text-stone-600 bg-stone-100 hover:bg-stone-50 border-stone-200 focus:ring-offset-stone-50 focus:ring-stone-400":"text-yellow-700 bg-yellow-100 hover:bg-yellow-50 border-yellow-200 focus:ring-offset-yellow-50 focus:ring-yellow-400"])},[e("h3",{class:m(["w-full flex items-center justify-center capitalize whitespace-wrap font-fancy select-none",Vt(t.name)])},p(t.name),3)],10,Zo),e("p",Jo,[e("span",Qo,[Xo,k(" "+p(t.rate),1)])])],8,Yo))),128))]))])):z.value!="top_sold"?(a(),n("div",el,[e("div",tl,[e("div",sl,[d(s(Ht),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),k(" Product not found ")])])])):w("",!0)])])])])])])]),e("aside",ol,[e("form",{onSubmit:nt(kt,["prevent"]),class:"flex flex-col relative w-full h-full min-h-screen divide-y divide-stone-200"},[e("div",il,[e("div",al,[e("div",nl,[e("div",rl,[dl,s(l).group_items.length?(a(),n("a",{key:0,onClick:o[9]||(o[9]=t=>bt()),href:"#",title:"Reset",class:"text-sm font-medium text-blue-600 hover:text-blue-500 border-b border-dashed border-blue-500 leading-4 hover:border-solid"}," Reset ")):w("",!0)]),e("div",cl,[d(s(is),{as:"div",class:"relative"},{default:v(()=>[e("div",null,[d(s(ss),{class:"max-w-xs bg-white rounded-full border border-gray-300 flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 py-1 lg:p-2 lg:rounded-md lg:hover:bg-gray-50"},{default:v(()=>[e("span",ul,[pl,k(p(ee.value.name),1)]),d(s(ns),{class:"shrink-0 ml-1 h-5 w-5 text-gray-400 lg:block","aria-hidden":"true"})]),_:1})]),d(Pt,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:v(()=>[d(s(os),{class:"z-10 origin-top-right absolute right-0 mt-2 w-32 lg:w-40 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:v(()=>[(a(!0),n(N,null,M(s(h).props.branches,t=>(a(),B(s(ls),{key:t.id},{default:v(({active:u,close:_})=>[e("button",{type:"button",onClick:V=>{ht(t.id)},class:m([u||t.id==s(l).branch_id?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 w-full text-left"])},p(t.name),11,ml)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])])])]),e("div",{class:m(["flex-1 flex flex-col w-full overflow-y-auto shrink-0 divide-y-2",s(l).order_id?"divide-blue-500":"divide-stone-500/40"])},[e("section",{class:m(["w-full h-full text-stone-700",s(l).order_id?"bg-blue-100/10":"bg-stone-50"])},[e("div",{class:m(["flex flex-col max-h-80 overflow-y-auto divide-y",s(l).order_id?"divide-blue-100":"divide-stone-200"])},[(a(!0),n(N,null,M(s(l).group_items,(t,u)=>(a(),n("div",{key:u,class:"py-2 px-3 flex flex-col font-medium sm:text-sm space-y-1"},[e("div",fl,p(u+1+". "+t.product_name),1),e("div",xl,[e("div",hl," TK "+p(t.rate),1),e("div",_l,[e("button",{type:"button",onClick:_=>{_t(t.product_id),t.quantity<=0&&s(l).group_items.splice(u,1)},class:"inline-flex items-center w-auto h-8 px-1 py-1 text-inherit rounded hover:shadow-md"},[t.quantity>1?(a(),B(s(Wt),{key:0,class:"h-5 w-5","aria-hidden":"true"})):(a(),B(s(us),{key:1,class:"h-5 w-5 text-red-600","aria-hidden":"true"}))],8,vl),y(e("input",{"onUpdate:modelValue":_=>t.quantity=_,onChange:o[10]||(o[10]=_=>O()),onKeyup:o[11]||(o[11]=_=>O()),type:"text",class:"px-1 py-1 h-8 w-10 rounded-none text-center sm:text-base font-normal border-transparent focus:ring-indigo-500 focus:border-indigo-500"},null,40,gl),[[$,t.quantity]]),e("button",{type:"button",onClick:_=>{q(t.product_id)},class:"inline-flex items-center w-auto h-8 px-1 py-1 text-inherit rounded hover:shadow-md"},[d(s(Yt),{class:"h-5 w-5","aria-hidden":"true"})],8,yl)])])]))),128))],2)],2),e("section",bl,[e("div",wl,[e("div",kl,[e("div",Cl,p(s(l).group_items.length)+" Items",1),e("div",$l,p(s(l).group_items.reduce((t,u)=>t+Number(u.quantity),0))+" Units ",1),e("div",Vl,[e("div",Nl,p(s(l).sub_total),1)])]),S.value?w("",!0):(a(),n("div",Sl,[Ul,e("div",Ml,[d(F,{class:"w-full",modelValue:s(l).discount_type,"onUpdate:modelValue":o[12]||(o[12]=t=>s(l).discount_type=t),items:C.discountTypes,hideIcon:!0},null,8,["modelValue","items"])]),e("div",zl,[y(e("input",{id:"discount_rate","onUpdate:modelValue":o[13]||(o[13]=t=>s(l).discount_rate=t),onKeyup:o[14]||(o[14]=t=>O()),placeholder:[s(l).discount_type=="percent"?"Rate %":"Amount"],type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:m(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,40,Tl),[[$,s(l).discount_rate]])])])),!S.value&&s(l).discount_type=="percent"&&Number(s(l).discount_rate)>0?(a(),n("div",Il,[jl,e("div",Al,p(s(l).discount_rate)+"%",1),e("div",Pl,[y(e("input",{id:"discount_amount","onUpdate:modelValue":o[15]||(o[15]=t=>s(l).discount_amount=t),readonly:"",placeholder:"Discount",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:m(["block w-full px-4 text-left text-xs sm:text-sm bg-stone-100 border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 rounded"])},null,512),[[$,s(l).discount_amount]])])])):w("",!0),s(l).service_cost>0?(a(),n("div",Ol,[Bl,e("div",El,[y(e("input",{id:"service_cost","onUpdate:modelValue":o[16]||(o[16]=t=>s(l).service_cost=t),readonly:"",placeholder:"Service Cost",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:m(["block w-full px-4 text-left text-xs sm:text-sm bg-stone-100 border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 rounded"])},null,512),[[$,s(l).service_cost]])])])):w("",!0),S.value?w("",!0):(a(),n("div",Fl,[e("div",Ll,[e("div",ql,[k(" VAT "),e("span",null,"("+p(s(l).vat_rate)+"%)",1)])]),e("div",Dl,[y(e("input",{id:"vat_amount","onUpdate:modelValue":o[17]||(o[17]=t=>s(l).vat_amount=t),onKeyup:o[18]||(o[18]=t=>O()),readonly:"",placeholder:"VAT",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:m(["block w-full px-4 text-left text-xs sm:text-sm bg-stone-100 border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 rounded"])},null,544),[[$,s(l).vat_amount]])]),e("div",Kl,[e("div",Rl,p(s(l).total),1)])])),S.value?w("",!0):(a(),n("div",Gl,[e("div",Hl,[y(e("input",{id:"cash","onUpdate:modelValue":o[19]||(o[19]=t=>s(l).cash=t),onClick:o[20]||(o[20]=t=>L.value=!L.value),readonly:"",placeholder:"Amount",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:m([Number(s(l).cash)>=Number(s(l).total)?"ring-green-400 focus:ring-green-400":"ring-red-400 focus:ring-red-400","block w-full px-4 border-none text-left text-xs sm:text-sm ring-2 hover:bg-stone-100 focus:ring-2 focus:bg-transparent focus:outline-none rounded-md"])},null,2),[[$,s(l).cash]])]),e("div",Wl,[e("div",{class:m([Number(s(l).change)<0?"text-red-500":"text-stone-700","text-right"])},p(s(l).change),3)])])),e("div",Yl,[e("div",Zl,[e("div",Jl,[Ql,y(e("input",{id:"customer_mobile","onUpdate:modelValue":o[21]||(o[21]=t=>s(l).customer_mobile=t),onKeyup:xe,placeholder:"Customer Mobile",autocomplete:"newPassword",type:"text",class:m(["pl-14","block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,544),[[$,s(l).customer_mobile]])])]),e("div",Xl,[y(e("input",{id:"customer_name","onUpdate:modelValue":o[22]||(o[22]=t=>s(l).customer_name=t),placeholder:"Name",type:"text",class:m(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,512),[[$,s(l).customer_name]])])]),e("p",{class:m(["mt-1 font-medium",x.success?"text-green-600":"text-red-600"])},p(x.message),3),y(e("div",ei,[e("div",ti,[y(e("textarea",{id:"delivery_address","onUpdate:modelValue":o[23]||(o[23]=t=>s(l).delivery_address=t),rows:"1",placeholder:"Address",class:m(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},`
                                            `,512),[[$,s(l).delivery_address]])])],512),[[ie,s(h).props.module.delivery&&((c=C.order)==null?void 0:c.order_delivery)]]),S.value?w("",!0):(a(),n("div",si,[oi,e("div",li,[d(F,{class:"",position:"top",modelValue:s(l).waiter_id,"onUpdate:modelValue":o[24]||(o[24]=t=>s(l).waiter_id=t),items:C.waiters},null,8,["modelValue","items"])])])),e("div",ii,[e("div",ai,[d(F,{class:"",position:"top",modelValue:s(l).dine_type,"onUpdate:modelValue":o[25]||(o[25]=t=>s(l).dine_type=t),items:C.dineTypes,hideIcon:!0},null,8,["modelValue","items"])]),e("div",ni,[y(e("input",{id:"guest_number","onUpdate:modelValue":o[26]||(o[26]=t=>s(l).guest_number=t),placeholder:"No. of Guests",required:s(l).dine_type=="dine-in",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:m(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,8,ri),[[$,s(l).guest_number]])]),e("div",di,[d(F,{class:"",position:"top",modelValue:s(l).table,"onUpdate:modelValue":o[27]||(o[27]=t=>s(l).table=t),items:C.tables,hideIcon:!0},null,8,["modelValue","items"])])]),e("div",ci,[e("div",ui,[y(e("input",{id:"note","onUpdate:modelValue":o[28]||(o[28]=t=>s(l).note=t),placeholder:"Note",type:"text",class:m(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,512),[[$,s(l).note]])])]),se.value?(a(),n("div",pi,[e("div",mi,[y(e("input",{"onUpdate:modelValue":o[29]||(o[29]=t=>s(l).date_time=t),type:"datetime-local",class:m(["block w-full px-4 text-left text-xs sm:text-sm border-stone-300 focus:ring-primary-400 focus:border-primary-400 hover:bg-stone-100 focus:bg-transparent rounded"])},null,512),[[$,s(l).date_time]])])])):w("",!0),e("div",fi,[e("label",null,[y(e("input",{type:"checkbox","onUpdate:modelValue":o[30]||(o[30]=t=>s(l).vat_add=t),id:"vat_add"},null,512),[[rt,s(l).vat_add]]),k(" Tick for presence ")])]),(b=C.order)!=null&&b.is_deliverable&&s(h).props.module.delivery?(a(),n("div",xi,[hi,e("div",_i,[d(F,{class:"",position:"top",modelValue:s(l).rider_id,"onUpdate:modelValue":o[31]||(o[31]=t=>s(l).rider_id=t),items:de.value,hideIcon:!0},null,8,["modelValue","items"])]),e("div",vi,[d(F,{class:"",position:"top",modelValue:s(l).status,"onUpdate:modelValue":o[32]||(o[32]=t=>s(l).status=t),items:C.statuses,hideIcon:!0},null,8,["modelValue","items"])])])):w("",!0)])])],2),e("div",gi,[e("div",yi,[e("div",bi,[e("button",{type:"submit",disabled:s(l).processing,class:"inline-flex items-center gap-x-1.5 rounded-md bg-green-500 px-3 py-2 text-sm font-semibold text-green-50 shadow-sm hover:bg-green-600 border border-green-500"},[d(s(ct),{class:"hidden sm:block -ml-0.5 h-5 w-5","aria-hidden":"true"}),se.value?(a(),n("span",ki," Update ")):(a(),n("span",Ci," Place Order "))],8,wi)]),ue.value?(a(),n("button",{key:0,onClick:o[33]||(o[33]=t=>wt()),type:"button",class:"inline-flex items-center gap-x-1.5 rounded-md bg-blue-50 px-3 py-2 text-sm font-semibold text-blue-700 shadow-sm hover:bg-blue-100 border border-blue-100"},[d(s(ps),{class:"hidden sm:block -ml-0.5 h-5 w-5","aria-hidden":"true"}),k(" Print ")])):w("",!0)])]),Z.value?(a(),n("div",$i,[e("div",{class:"modal-content"},[Vi,e("div",{class:"modal-buttons"},[e("button",{onClick:Ct,class:"btn btn-success"},"Yes"),e("button",{onClick:$t,class:"btn btn-danger"},"No")])])])):w("",!0)],40,ll)])])]),d(s(ft),{as:"template",show:L.value},{default:v(()=>[d(s(pt),{as:"div",class:"relative z-10",onClose:o[36]||(o[36]=t=>L.value=!1)},{default:v(()=>[d(s(H),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[Ni]),_:1}),e("div",Si,[e("div",Ui,[d(s(H),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:v(()=>[d(s(mt),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},{default:v(()=>{var t;return[e("div",Mi,[e("button",{type:"button",class:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[34]||(o[34]=u=>L.value=!1)},[zi,d(s(xt),{class:"h-6 w-6","aria-hidden":"true"})])]),e("div",Ti,[e("div",Ii,[d(s(es),{as:"h3",class:"text-lg font-semibold leading-6 text-gray-900"},{default:v(()=>[k(" Payment Amount -/ "+p(s(l).total),1)]),_:1}),E.value?(a(),n("div",ji,[e("dl",Ai,[e("dd",Pi,[e("div",Oi,[Bi,e("div",Ei,": "+p(s(l).customer_name),1)]),e("div",Fi,[Li,e("div",qi,": "+p(s(l).customer_mobile),1)]),s(h).props.module.token>0?(a(),n("div",Di,[Ki,e("div",Ri,[e("div",Gi,[k(" : "+p((t=E.value)==null?void 0:t.balance)+" ",1),Hi,d(s(ut),{class:"mx-2 h-5 w-5 text-gray-800","aria-hidden":"true"}),k(" "+p(Y.value)+" ",1),Wi])])])):w("",!0)])])])):w("",!0),e("table",Yi,[e("thead",Zi,[e("tr",null,[Ji,e("th",Qi,[e("div",{class:m(["block w-full px-0 py-0 text-left text-sm sm:text-2xl border-transparent rounded focus:ring-gray-400 focus:border-gray-400 focus:bg-transparent",Number(s(l).cash)>=Number(s(l).total)?"text-green-600":"text-red-600"])},p(s(l).cash),3)])]),s(h).props.module.token>0&&E.value?(a(),n("tr",Xi,[e("td",ea,[e("div",ta,[k(" Token Used "),y(e("input",{type:"checkbox",id:"use-token",onChange:fe,"onUpdate:modelValue":o[35]||(o[35]=u=>s(l).token_use=u),class:"group-checkbox form-checkbox w-5 h-5 focus:ring-primary-600 focus:border-primary-600 text-primary-600 transition duration-150 ease-in-out rounded select-none cursor-pointer"},null,544),[[rt,s(l).token_use]])])]),e("td",sa,[s(l).token_use?(a(),n("div",oa,[k(p(s(l).token*ae.value)+" ",1),la,d(s(ut),{class:"mx-2 h-5 w-5 text-gray-800","aria-hidden":"true"}),k(" "+p(s(l).token)+" ",1),ia])):w("",!0)])])):w("",!0)]),e("tbody",aa,[(a(!0),n(N,null,M(s(l).group_methods,u=>(a(),n("tr",{key:u.id},[e("td",na,[e("p",{style:Ot(Nt(u))},p(u.name),5)]),e("td",ra,[y(e("input",{type:"text","onUpdate:modelValue":_=>u.amount=_,onKeyup:fe,oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",class:"block w-full px-2 py-1.5 text-left text-xs sm:text-sm border-stone-300 focus:ring-gray-400 focus:border-gray-400 hover:bg-stone-100 focus:bg-transparent rounded"},null,40,da),[[$,u.amount]])])]))),128))])])])])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),ue.value?(a(),n("div",ca,[d(qt,{order:C.order},null,8,["order"])])):w("",!0)],64)}}},ja=Zt(ua,[["__scopeId","data-v-b173e03c"]]);export{ja as default};
