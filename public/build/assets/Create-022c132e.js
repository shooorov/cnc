import{K as q,q as B,T as K,o as m,f as y,a,u as o,w as v,F as w,Z as T,b as e,j as C,d as c,t as p,c as F,g as S,e as R,i as d,x as g,r as U,n as D,B as M,O}from"./app-5791f070.js";import{_ as Q}from"./AuthenticatedLayout-11ec7f50.js";import{B as z}from"./Breadcrumb-f795d3d4.js";import{_ as E}from"./Alert-36a35dc3.js";import{_ as N}from"./InputError-e27d143f.js";import{_ as L}from"./Combobox-538c6060.js";import{r as x}from"./PlusIcon-b4b926cb.js";import{r as P}from"./ClipboardDocumentIcon-e8220cb1.js";import{r as Z}from"./XMarkIcon-a268bf7e.js";import"./_commonjsHelpers-de833af9.js";import"./transition-10ffcd92.js";import"./use-outside-click-94eb500d.js";import"./hidden-5e2b8745.js";import"./menu-f75a36ce.js";import"./use-text-value-334f6123.js";import"./ShoppingBagIcon-426b9f89.js";import"./XMarkIcon-1029282c.js";import"./ChevronDownIcon-fde980d0.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-controllable-b2f1e375.js";import"./ChevronUpDownIcon-65732a63.js";const G={class:"bg-white shadow"},H={class:"px-4 sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8"},J={class:"py-6 md:flex md:items-center md:justify-between lg:border-t lg:border-gray-200"},W={class:"flex-1 min-w-0"},X={class:"mt-6 h-9 flex space-x-3 md:mt-0 md:ml-4"},Y={class:"py-5"},ee={class:"max-w-6xl mx-auto sm:px-6 lg:px-8"},te={class:"bg-white shadow sm:rounded-lg"},se={class:"flex flex-col sm:flex-row sm:justify-between items-center px-4 py-5 border-b border-gray-200 sm:px-8"},oe={class:"max-w-2xl leading-10 text-gray-700 text-lg font-medium mb-4 sm:mb-0"},re={class:"flex-shrink-0 flex space-x-3"},ae=["onSubmit"],ne={class:"space-y-4 sm:space-y-6 px-5 py-6"},ie={class:"max-w-xl mx-auto"},le={class:"grid grid-cols-6 gap-6"},de={class:"col-span-6 sm:col-span-3"},ce=e("label",{class:"block text-sm font-medium text-gray-700"},[c(" Inventory Date "),e("span",{class:"text-red-500"},"*")],-1),ue={class:"col-span-6 sm:col-span-3"},me=e("label",{class:"block text-sm font-medium text-gray-700"},[c(" Total "),e("span",{class:"text-red-500"},"*")],-1),pe={class:"relative"},ge=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})],-1),fe={class:"relative flex justify-center ml-4"},he={class:"px-3 bg-white text-lg font-medium text-gray-900"},ye={class:"max-w-5xl mx-auto space-y-4 sm:space-y-6"},xe={class:"table-auto sm:table-fixed min-w-full divide-y divide-gray-200"},_e={class:"bg-gray-50"},be=e("th",{scope:"col",class:"py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"#",-1),ve={scope:"col",class:"py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},we=e("th",{scope:"col",class:"w-1/4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Quantity",-1),ke=e("th",{scope:"col",class:"w-20 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Unit",-1),$e=e("th",{scope:"col",class:"w-40 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rate",-1),Ve=e("th",{scope:"col",class:"w-40 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total",-1),Ce=e("th",{scope:"col",class:"w-24 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Avg Rate",-1),Ue=e("th",{scope:"col",class:"w-6 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"#",-1),Ne={class:"bg-white divide-y divide-gray-200"},Ae={class:"px-2"},Ie=["onUpdate:modelValue","onKeyup"],je=["onUpdate:modelValue"],qe=e("option",{value:""},"Unit",-1),Be=["value"],Ke=["onUpdate:modelValue","onChange","onKeyup"],Te=["onUpdate:modelValue","onChange","onKeyup"],Fe=["onUpdate:modelValue"],Se=["onClick"],Re={class:"bg-white"},De=e("th",{scope:"col",class:"py-2 text-left text-lg font-medium font-mono"},null,-1),Me={colspan:"5",class:"text-left pt-3"},Oe={scope:"col",class:"py-2 text-left text-lg font-medium font-mono"},Qe=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center ml-4"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"})])],-1),ze={class:"max-w-5xl mx-auto space-y-4 sm:space-y-6"},Ee={class:"flex justify-start"},Le={type:"submit",class:"mr-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},pt={__name:"Create",props:{orders:Array,products:Array,items:Array,units:Array,date:String},setup(_){const k=_,f=q(),$=B({item_id:"",quantity:"",unit:"",rate:"",total:"",avg_rate:null}),i=K({inventory_date:k.date,total:null,group_items:[{...$.value}]}),h=(l,n)=>{let t=i.group_items[l];n=="rate"?(t.total=((t.rate||0)*(t.quantity||0)).toFixed(2),t.total=Number(t.total)>0?Number(t.total):""):(t.rate=t.total&&t.quantity?(t.total/t.quantity).toFixed(2):0,t.rate=Number(t.rate)>0?Number(t.rate):"");let r=k.items.find(u=>u.id==t.item_id);t.avg_rate=(r==null?void 0:r.avg_rate)??null,t.unit||(t.unit=r.unit),i.total=i.group_items.reduce((u,s)=>u+Number(s.total),0)},A=l=>{confirm("Are you sure you want to delete this element?")&&i.group_items.splice(l,1)},V=(l=1)=>{for(let n=1;n<=l;n++)i.group_items.push({...$.value})},I=[{name:f.props.string_change.item_inventory+" In",href:route("item_inventory.in"),current:!1},{name:"Create Page",href:"#",current:!1}],j=()=>{O.post(route("item_inventory.store"),i)};return(l,n)=>(m(),y(w,null,[a(o(T),{title:"Create Inventory"}),a(Q,null,{default:v(()=>[e("div",G,[e("div",H,[e("div",J,[e("div",W,[a(z,{breadcrumbs:I})]),e("div",X,[a(o(C),{href:l.route("item_inventory.create"),class:"inline-flex items-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white hover:bg-gray-50 text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-primary-400"},{default:v(()=>[a(o(x),{class:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),c(" In ")]),_:1},8,["href"])])])])]),e("div",Y,[e("div",ee,[e("div",te,[e("div",se,[e("p",oe,p(o(f).props.string_change.item_inventory)+" In Create",1),e("div",re,[o(f).props.navigation.routes.includes("item_inventory.compare")?(m(),F(o(C),{key:0,href:l.route("item_inventory.compare"),class:"inline-flex items-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white hover:bg-gray-50 text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-primary-400"},{default:v(()=>[a(o(P),{class:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),c(" Compare ")]),_:1},8,["href"])):S("",!0)])]),a(E),e("form",{onSubmit:R(j,["prevent"])},[e("dl",ne,[e("div",ie,[e("div",le,[e("div",de,[ce,d(e("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>o(i).inventory_date=t),type:"datetime-local",class:"mt-1 block w-full px-4 focus:ring-indigo-400 focus:border-indigo-400 hover:bg-gray-100 focus:bg-transparent sm:text-sm border-gray-300 rounded"},null,512),[[g,o(i).inventory_date]]),a(N,{message:l.$page.props.errors.inventory_date},null,8,["message"])]),e("div",ue,[me,d(e("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>o(i).total=t),type:"text",placeholder:"Total",readonly:"",class:"mt-1 block w-full px-4 focus:ring-none focus:ring-0 focus:ring-primary-400 focus:border-primary-400 bg-gray-100 sm:text-sm border-gray-300 rounded"},null,512),[[g,o(i).total]]),a(N,{message:l.$page.props.errors.total},null,8,["message"])])])]),e("div",pe,[ge,e("div",fe,[e("span",he,p(o(f).props.string_change.item_s),1)])]),e("div",ye,[e("table",xe,[e("thead",_e,[e("tr",null,[be,e("th",ve,p(o(f).props.string_change.item),1),we,ke,$e,Ve,Ce,Ue])]),e("tbody",Ne,[(m(!0),y(w,null,U(o(i).group_items,(t,r)=>{var u;return m(),y("tr",{key:r},[e("td",Ae,p(Number(r)+1),1),e("td",{class:D(l.$page.props.errors.group_items&&((u=l.$page.props.errors.group_items[r])!=null&&u.unit)?"border border-red-500":"border-red-500")},[a(L,{class:"",modelValue:t.item_id,"onUpdate:modelValue":s=>t.item_id=s,items:_.items},null,8,["modelValue","onUpdate:modelValue","items"])],2),e("td",null,[d(e("input",{"onUpdate:modelValue":s=>t.quantity=s,onKeyup:s=>h(r,"rate"),placeholder:"Quantity",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",class:"block w-full px-4 pr-24 focus:ring-indigo-400 focus:border-indigo-400 hover:bg-gray-100 focus:bg-transparent sm:text-sm border-gray-300 rounded"},null,40,Ie),[[g,t.quantity]])]),e("td",null,[d(e("select",{"onUpdate:modelValue":s=>t.unit=s,class:"block w-full px-2 pr-6 focus:ring-indigo-400 focus:border-indigo-400 hover:bg-gray-100 focus:bg-transparent sm:text-sm border-gray-300 rounded"},[qe,(m(!0),y(w,null,U(_.units,(s,b)=>(m(),y("option",{key:b,value:b},p(b),9,Be))),128))],8,je),[[M,t.unit]])]),e("td",null,[d(e("input",{"onUpdate:modelValue":s=>t.rate=s,onChange:s=>h(r,"rate"),onKeyup:s=>h(r,"rate"),placeholder:"Rate",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:"block w-full px-4 focus:ring-indigo-400 focus:border-indigo-400 hover:bg-gray-100 focus:bg-transparent sm:text-sm border-gray-300 rounded"},null,40,Ke),[[g,t.rate]])]),e("td",null,[d(e("input",{"onUpdate:modelValue":s=>t.total=s,onChange:s=>h(r,"total"),onKeyup:s=>h(r,"total"),placeholder:"Total",type:"text",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",autocomplete:"off",class:"block w-full px-4 focus:ring-indigo-400 focus:border-indigo-400 hover:bg-gray-100 focus:bg-transparent sm:text-sm border-gray-300 rounded"},null,40,Te),[[g,t.total]])]),e("td",null,[d(e("input",{"onUpdate:modelValue":s=>t.avg_rate=s,readonly:"",placeholder:"Avg Rate",type:"text",class:"block w-full px-4 focus:ring-none focus:ring-0 focus:ring-primary-400 focus:border-primary-400 bg-gray-100 sm:text-sm border-gray-300 rounded"},null,8,Fe),[[g,t.avg_rate]])]),e("td",null,[e("button",{onClick:s=>A(r),type:"button",class:"p-1 border border-transparent rounded-full shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[a(o(Z),{class:"h-4 w-4","aria-hidden":"true"})],8,Se)])])}),128))]),e("tfoot",Re,[e("tr",null,[De,e("th",Me,[e("button",{onClick:n[2]||(n[2]=t=>V()),type:"button",class:"inline-flex items-center mr-3 px-4 py-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[c(" Add Item "),a(o(x),{class:"ml-2 -mr-0.5 h-4 w-4","aria-hidden":"true"})]),e("button",{onClick:n[3]||(n[3]=t=>V(5)),type:"button",class:"inline-flex items-center mr-3 px-4 py-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[c(" Add 5 Item "),a(o(x),{class:"ml-2 -mr-0.5 h-4 w-4","aria-hidden":"true"})])]),e("th",Oe,p(Number(o(i).total).toFixed(2)),1)])])])]),Qe,e("div",ze,[e("div",Ee,[e("button",Le,[a(o(x),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),c(" Create ")])])])])],40,ae)])])])]),_:1})],64))}};export{pt as default};
