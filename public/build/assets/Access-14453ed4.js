import{K as E,T as F,A as V,h as b,o as r,f as a,a as l,u as m,w as y,F as u,Z as M,b as e,j as U,d as K,r as h,i as p,v as w,t as _,e as D,p as v,n as L}from"./app-05106c13.js";import{_ as T}from"./AuthenticatedLayout-86ad9229.js";import{B as z}from"./Breadcrumb-3b71c00a.js";import{_ as I}from"./Notification-615cdcb8.js";import{S as O}from"./Status-84bf79a9.js";import{r as P}from"./PlusIcon-189543c2.js";import"./_commonjsHelpers-de833af9.js";import"./transition-64c92e98.js";import"./use-outside-click-40f4ba09.js";import"./hidden-f9f3699b.js";import"./menu-0fd29ff7.js";import"./use-text-value-1750268b.js";import"./ShoppingBagIcon-7f48843a.js";import"./XMarkIcon-c17086d0.js";import"./ChevronDownIcon-f3fa4a18.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./XMarkIcon-9b6fa05a.js";const W={class:"bg-white shadow"},Z={class:"px-4 sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8"},q={class:"py-6 md:flex md:items-center md:justify-between lg:border-t lg:border-gray-200"},G={class:"flex-1 min-w-0"},H={class:"mt-6 h-9 flex space-x-3 md:mt-0 md:ml-4"},J={class:"py-5"},Q={class:"max-w-6xl mx-auto sm:px-6 lg:px-8"},X={class:"bg-white shadow sm:rounded-lg"},Y=e("div",{class:"flex flex-col sm:flex-row sm:justify-between items-center px-4 py-5 border-b border-gray-200 sm:px-8"},[e("p",{class:"max-w-2xl leading-10 text-gray-700 text-lg font-medium mb-4 sm:mb-0"},"Central Kitchen Access"),e("div",{class:"flex-shrink-0 flex space-x-3"})],-1),ee={class:"px-5 py-5 mx-auto max-w-5xl space-y-4"},se={class:"grid sm:grid-cols-5 sm:gap-2"},te=e("dt",{class:"text-sm sm:leading-10 font-semibold text-gray-700 tracking-wider sm:text-right pr-8"}," Central Kitchen ",-1),re={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-4 grid sm:grid-cols-4 sm:gap-2"},ae={class:"inline-flex items-center mr-5"},oe=["onUpdate:modelValue"],le={class:"ml-2 tracking-wide cursor-pointer"},ce={class:"grid sm:grid-cols-5 sm:gap-2"},ie=e("dt",{class:"text-sm sm:leading-10 font-semibold text-gray-700 tracking-wider sm:text-right pr-8"}," Role ",-1),ne={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-4 grid sm:grid-cols-4 sm:gap-2"},de={class:"inline-flex items-center mr-5"},me=["onUpdate:modelValue"],ue={class:"ml-2 tracking-wide cursor-pointer"},pe={class:"space-y-8 py-6 px-6"},he={class:"table-auto sm:table-fixed min-w-full w-full"},_e=e("th",{class:"w-12 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-center"}," S.N.",-1),ge=e("th",{class:"w-32 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-left"}," Name",-1),xe=e("th",{class:"w-16 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-left"}," Role",-1),fe={class:"bg-white"},be={class:"px-3 py-1 whitespace-wrap break-words"},ye={class:"text-sm leading-5 text-gray-700 text-center"},we={class:"px-3 py-1 whitespace-wrap break-words"},ve={class:"px-3 py-1 whitespace-wrap break-words"},ke=["id","onChange","onUpdate:modelValue"],Ce=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center ml-4"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"})])],-1),Ae=e("div",{class:"mx-auto"},[e("div",{class:"flex justify-end"})],-1),Oe={__name:"Access",props:{users:Array,all_central_kitchens:Array,all_roles:Array,access:Object},setup(k){const c=k,j=E(),o=F({access:c.access,user_id:null,central_kitchen_id:null});c.users.forEach(t=>{o.access[t.id]=[],c.all_central_kitchens.forEach(i=>{o.access[t.id][i.id]=c.access[t.id]?c.access[t.id][i.id]:!1})}),console.log(o.access);function B(t,i){o.user_id=t,o.central_kitchen_id=i,j.props.alertMessage={},o.post(route("central.access_update"),{onFinish:()=>{}})}const g=c.all_roles;g.push({name:"Waiter"}),g.push({name:"Chef"}),g.push({name:"Barista"});const x=V(c.all_central_kitchens.map(t=>({id:t.id,name:t.name}))),f=V(g.map(t=>({name:t.name}))),S=b(()=>f.value.filter(t=>t.is_checked).map(t=>t.name.toLowerCase())),C=b(()=>x.value.filter(t=>t.is_checked).length==0),N=b(()=>f.value.filter(t=>t.is_checked)==0),$=[{name:"Central Kitchens",href:route("central.index"),current:!1},{name:"Access Page",href:"#",current:!1}],R={super_admin:"bg-red-100 text-red-700 rounded-full",waiter:"bg-yellow-100 text-yellow-800 rounded-full",chef:"bg-blue-100 text-blue-700 rounded-full",barista:"bg-purple-100 text-purple-700 rounded-full",rider:"bg-pink-100 text-pink-700 rounded-full",pending:"bg-yellow-100 text-yellow-900 rounded-md",active:"bg-green-100 text-green-900 rounded-md",inactive:"bg-rose-100 text-rose-900 rounded-md"};return(t,i)=>(r(),a(u,null,[l(m(M),{title:"Central Kitchen Access"}),l(T,null,{default:y(()=>[e("div",W,[e("div",Z,[e("div",q,[e("div",G,[l(z,{breadcrumbs:$})]),e("div",H,[l(m(U),{href:t.route("central.create"),class:"inline-flex items-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white hover:bg-gray-50 text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-primary-400"},{default:y(()=>[l(m(P),{class:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),K(" Create ")]),_:1},8,["href"])])])])]),e("div",J,[e("div",Q,[e("div",X,[Y,l(I),e("dl",ee,[e("div",se,[te,e("dd",re,[(r(!0),a(u,null,h(x.value,s=>(r(),a("div",{key:s.name,class:"mt-3 space-y-4"},[e("label",ae,[p(e("input",{"onUpdate:modelValue":n=>s.is_checked=n,type:"checkbox",class:"form-checkbox w-5 h-5 border-gray-300 text-blue-500 cursor-pointer focus:ring-blue-500 rounded"},null,8,oe),[[w,s.is_checked]]),e("span",le,_(s.name),1)])]))),128))])]),e("div",ce,[ie,e("dd",ne,[(r(!0),a(u,null,h(f.value,s=>(r(),a("div",{key:s.name,class:"mt-3 space-y-4"},[e("label",de,[p(e("input",{"onUpdate:modelValue":n=>s.is_checked=n,type:"checkbox",class:"form-checkbox w-5 h-5 border-gray-300 text-purple-500 cursor-pointer focus:ring-purple-500 rounded"},null,8,me),[[w,s.is_checked]]),e("span",ue,_(s.name),1)])]))),128))])])]),e("form",{onSubmit:i[0]||(i[0]=D((...s)=>t.submit&&t.submit(...s),["prevent"]))},[e("dl",pe,[e("table",he,[e("thead",null,[e("tr",null,[_e,ge,xe,(r(!0),a(u,null,h(x.value,s=>p((r(),a("th",{key:s.id,class:"px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-center"},_(s.name),1)),[[v,s.is_checked||C.value]])),128))])]),e("tbody",fe,[(r(!0),a(u,null,h(k.users.filter(s=>s.is_admin!=!0),(s,n)=>p((r(),a("tr",{key:s.id,class:L([n%2==0?"bg-white":"bg-gray-50","border-b"])},[e("td",be,[e("div",ye,_(parseInt(n)+1),1)]),e("td",we,[l(m(U),{href:t.route("user.edit",s.id),class:"text-sm leading-5 text-blue-600 hover:underline"},{default:y(()=>[K(_(s.name),1)]),_:2},1032,["href"])]),e("td",ve,[l(O,{class:"ml-1",name:s.role_name,colors:R},null,8,["name"])]),(r(!0),a(u,null,h(x.value,d=>p((r(),a("td",{key:d.id,class:"p-2 whitespace-nowrap text-center"},[p(e("input",{type:"checkbox",id:`access_${s.id}_${d.id}`,onChange:A=>B(s.id,d.id),"onUpdate:modelValue":A=>m(o).access[s.id][d.id]=A,class:"form-checkbox w-5 h-5 border-gray-300 text-indigo-500 cursor-pointer focus:ring-indigo-500 rounded"},null,40,ke),[[w,m(o).access[s.id][d.id]]])])),[[v,d.is_checked||C.value]])),128))],2)),[[v,S.value.includes(s.role_name)||N.value]])),128))])]),Ce,Ae])],32)])])])]),_:1})],64))}};export{Oe as default};
